{"version":3,"names":["Object","defineProperty","exports","value","toBeVisible","react_native_1","require","jest_matcher_utils_1","utils_1","component_tree_1","isVisibleForStyles","element","style","props","_react_native_1$Style","StyleSheet","flatten","display","opacity","isVisibleForAccessibility","accessibilityElementsHidden","importantForAccessibility","isModalVisible","type","Modal","visible","isElementVisible","current","getParentElement","_this","checkReactElement","isVisible","pass","message","is","matcherHint","isNot","printElement","join"],"sources":["to-be-visible.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toBeVisible = void 0;\nconst react_native_1 = require(\"react-native\");\nconst jest_matcher_utils_1 = require(\"jest-matcher-utils\");\nconst utils_1 = require(\"./utils\");\nconst component_tree_1 = require(\"./component-tree\");\nfunction isVisibleForStyles(element) {\n    const style = element.props.style || {};\n    const { display, opacity } = react_native_1.StyleSheet.flatten(style);\n    return display !== 'none' && opacity !== 0;\n}\nfunction isVisibleForAccessibility(element) {\n    return (!element.props.accessibilityElementsHidden &&\n        element.props.importantForAccessibility !== 'no-hide-descendants');\n}\nfunction isModalVisible(element) {\n    return element.type !== react_native_1.Modal || element.props.visible !== false;\n}\nfunction isElementVisible(element) {\n    let current = element;\n    while (current) {\n        if (!isVisibleForStyles(current) ||\n            !isVisibleForAccessibility(current) ||\n            !isModalVisible(current)) {\n            return false;\n        }\n        current = (0, component_tree_1.getParentElement)(current, [react_native_1.Modal]);\n    }\n    return true;\n}\nfunction toBeVisible(element) {\n    (0, utils_1.checkReactElement)(element, toBeVisible, this);\n    const isVisible = isElementVisible(element);\n    return {\n        pass: isVisible,\n        message: () => {\n            const is = isVisible ? 'is' : 'is not';\n            return [\n                (0, jest_matcher_utils_1.matcherHint)(`${this.isNot ? '.not' : ''}.toBeVisible`, 'element', ''),\n                '',\n                `Received element ${is} visible:`,\n                (0, utils_1.printElement)(element),\n            ].join('\\n');\n        },\n    };\n}\nexports.toBeVisible = toBeVisible;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,WAAW,GAAG,KAAK,CAAC;AAC5B,IAAMC,cAAc,GAAGC,OAAO,CAAC,cAAc,CAAC;AAC9C,IAAMC,oBAAoB,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC1D,IAAME,OAAO,GAAGF,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMG,gBAAgB,GAAGH,OAAO,CAAC,kBAAkB,CAAC;AACpD,SAASI,kBAAkBA,CAACC,OAAO,EAAE;EACjC,IAAMC,KAAK,GAAGD,OAAO,CAACE,KAAK,CAACD,KAAK,IAAI,CAAC,CAAC;EACvC,IAAAE,qBAAA,GAA6BT,cAAc,CAACU,UAAU,CAACC,OAAO,CAACJ,KAAK,CAAC;IAA7DK,OAAO,GAAAH,qBAAA,CAAPG,OAAO;IAAEC,OAAO,GAAAJ,qBAAA,CAAPI,OAAO;EACxB,OAAOD,OAAO,KAAK,MAAM,IAAIC,OAAO,KAAK,CAAC;AAC9C;AACA,SAASC,yBAAyBA,CAACR,OAAO,EAAE;EACxC,OAAQ,CAACA,OAAO,CAACE,KAAK,CAACO,2BAA2B,IAC9CT,OAAO,CAACE,KAAK,CAACQ,yBAAyB,KAAK,qBAAqB;AACzE;AACA,SAASC,cAAcA,CAACX,OAAO,EAAE;EAC7B,OAAOA,OAAO,CAACY,IAAI,KAAKlB,cAAc,CAACmB,KAAK,IAAIb,OAAO,CAACE,KAAK,CAACY,OAAO,KAAK,KAAK;AACnF;AACA,SAASC,gBAAgBA,CAACf,OAAO,EAAE;EAC/B,IAAIgB,OAAO,GAAGhB,OAAO;EACrB,OAAOgB,OAAO,EAAE;IACZ,IAAI,CAACjB,kBAAkB,CAACiB,OAAO,CAAC,IAC5B,CAACR,yBAAyB,CAACQ,OAAO,CAAC,IACnC,CAACL,cAAc,CAACK,OAAO,CAAC,EAAE;MAC1B,OAAO,KAAK;IAChB;IACAA,OAAO,GAAG,CAAC,CAAC,EAAElB,gBAAgB,CAACmB,gBAAgB,EAAED,OAAO,EAAE,CAACtB,cAAc,CAACmB,KAAK,CAAC,CAAC;EACrF;EACA,OAAO,IAAI;AACf;AACA,SAASpB,WAAWA,CAACO,OAAO,EAAE;EAAA,IAAAkB,KAAA;EAC1B,CAAC,CAAC,EAAErB,OAAO,CAACsB,iBAAiB,EAAEnB,OAAO,EAAEP,WAAW,EAAE,IAAI,CAAC;EAC1D,IAAM2B,SAAS,GAAGL,gBAAgB,CAACf,OAAO,CAAC;EAC3C,OAAO;IACHqB,IAAI,EAAED,SAAS;IACfE,OAAO,EAAE,SAAAA,QAAA,EAAM;MACX,IAAMC,EAAE,GAAGH,SAAS,GAAG,IAAI,GAAG,QAAQ;MACtC,OAAO,CACH,CAAC,CAAC,EAAExB,oBAAoB,CAAC4B,WAAW,EAAG,GAAEN,KAAI,CAACO,KAAK,GAAG,MAAM,GAAG,EAAG,cAAa,EAAE,SAAS,EAAE,EAAE,CAAC,EAC/F,EAAE,EACD,oBAAmBF,EAAG,WAAU,EACjC,CAAC,CAAC,EAAE1B,OAAO,CAAC6B,YAAY,EAAE1B,OAAO,CAAC,CACrC,CAAC2B,IAAI,CAAC,IAAI,CAAC;IAChB;EACJ,CAAC;AACL;AACApC,OAAO,CAACE,WAAW,GAAGA,WAAW","ignoreList":[]}