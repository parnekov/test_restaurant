{"version":3,"names":["_react","_interopRequireDefault","require","_render","obj","__esModule","default","renderHook","renderCallback","options","initialProps","wrapper","result","createRef","TestComponent","_ref","renderCallbackProps","renderResult","useEffect","current","_ref2","renderInternal","createElement","detectHostComponentNames","baseRerender","rerender","unmount","rerenderCallbackProps"],"sources":["../src/render-hook.tsx"],"sourcesContent":["import React from 'react';\nimport type { ComponentType } from 'react';\nimport { renderInternal } from './render';\n\nexport type RenderHookResult<Result, Props> = {\n  rerender: (props: Props) => void;\n  result: { current: Result };\n  unmount: () => void;\n};\n\nexport type RenderHookOptions<Props> = {\n  initialProps?: Props;\n  wrapper?: ComponentType<any>;\n};\n\nexport function renderHook<Result, Props>(\n  renderCallback: (props: Props) => Result,\n  options?: RenderHookOptions<Props>,\n): RenderHookResult<Result, Props> {\n  const initialProps = options?.initialProps;\n  const wrapper = options?.wrapper;\n\n  const result: React.MutableRefObject<Result | null> = React.createRef();\n\n  function TestComponent({ renderCallbackProps }: { renderCallbackProps: Props }) {\n    const renderResult = renderCallback(renderCallbackProps);\n\n    React.useEffect(() => {\n      result.current = renderResult;\n    });\n\n    return null;\n  }\n\n  const { rerender: baseRerender, unmount } = renderInternal(\n    // @ts-expect-error since option can be undefined, initialProps can be undefined when it should'nt\n    <TestComponent renderCallbackProps={initialProps} />,\n    {\n      wrapper,\n      detectHostComponentNames: false,\n    },\n  );\n\n  function rerender(rerenderCallbackProps: Props) {\n    return baseRerender(<TestComponent renderCallbackProps={rerenderCallbackProps} />);\n  }\n\n  // @ts-expect-error result is ill typed because ref is initialized to null\n  return { result, rerender, unmount };\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAD,OAAA;AAA0C,SAAAD,uBAAAG,GAAA;EAAA,OAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA;IAAAE,OAAA,EAAAF;EAAA;AAAA;AAanC,SAASG,UAAUA,CACxBC,cAAwC,EACxCC,OAAkC,EACD;EACjC,IAAMC,YAAY,GAAGD,OAAO,oBAAPA,OAAO,CAAEC,YAAY;EAC1C,IAAMC,OAAO,GAAGF,OAAO,oBAAPA,OAAO,CAAEE,OAAO;EAEhC,IAAMC,MAA6C,GAAGZ,MAAA,CAAAM,OAAK,CAACO,SAAS,CAAC,CAAC;EAEvE,SAASC,aAAaA,CAAAC,IAAA,EAA0D;IAAA,IAAvDC,mBAAA,GAAAD,IAAA,CAAAC,mBAAA;IACvB,IAAMC,YAAY,GAAGT,cAAc,CAACQ,mBAAmB,CAAC;IAExDhB,MAAA,CAAAM,OAAK,CAACY,SAAS,CAAC,YAAM;MACpBN,MAAM,CAACO,OAAO,GAAGF,YAAY;IAC/B,CAAC,CAAC;IAEF,OAAO,IAAI;EACb;EAEA,IAAAG,KAAA,GAA4C,IAAAjB,OAAA,CAAAkB,cAAc,EAExDrB,MAAA,CAAAM,OAAA,CAAAgB,aAAA,CAACR,aAAa;MAACE,mBAAmB,EAAEN;IAAa,CAAE,CAAC,EACpD;MACEC,OAAO,EAAPA,OAAO;MACPY,wBAAwB,EAAE;IAC5B,CACF,CAAC;IAPiBC,YAAY,GAAAJ,KAAA,CAAtBK,QAAQ;IAAgBC,OAAA,GAAAN,KAAA,CAAAM,OAAA;EAShC,SAASD,QAAQA,CAACE,qBAA4B,EAAE;IAC9C,OAAOH,YAAY,CAACxB,MAAA,CAAAM,OAAA,CAAAgB,aAAA,CAACR,aAAa;MAACE,mBAAmB,EAAEW;IAAsB,CAAE,CAAC,CAAC;EACpF;EAGA,OAAO;IAAEf,MAAM,EAANA,MAAM;IAAEa,QAAQ,EAARA,QAAQ;IAAEC,OAAA,EAAAA;EAAQ,CAAC;AACtC","ignoreList":[]}