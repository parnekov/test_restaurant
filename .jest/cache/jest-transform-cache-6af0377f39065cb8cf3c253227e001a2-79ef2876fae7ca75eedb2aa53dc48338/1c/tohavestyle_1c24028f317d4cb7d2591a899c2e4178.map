{"version":3,"names":["_interopRequireDefault","require","_slicedToArray2","_defineProperty2","__importDefault","mod","__esModule","Object","defineProperty","exports","value","toHaveStyle","react_native_1","jest_matcher_utils_1","jest_diff_1","chalk_1","utils_1","printoutStyles","style","keys","sort","map","prop","Array","isArray","JSON","stringify","join","narrow","expected","received","filter","reduce","obj","assign","default","expectedDiff","_diffOutput$replace","receivedNarrow","diffOutput","diff","replace","red","element","_react_native_1$Style","_react_native_1$Style2","_this","checkReactElement","StyleSheet","flatten","props","pass","entries","every","_ref","_ref2","equals","message","matcher","isNot","matcherHint"],"sources":["to-have-style.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toHaveStyle = void 0;\nconst react_native_1 = require(\"react-native\");\nconst jest_matcher_utils_1 = require(\"jest-matcher-utils\");\nconst jest_diff_1 = require(\"jest-diff\");\nconst chalk_1 = __importDefault(require(\"chalk\"));\nconst utils_1 = require(\"./utils\");\nfunction printoutStyles(style) {\n    return Object.keys(style)\n        .sort()\n        .map((prop) => Array.isArray(style[prop])\n        ? `${prop}: ${JSON.stringify(style[prop], null, 2)};`\n        : `${prop}: ${style[prop]};`)\n        .join('\\n');\n}\n/**\n * Narrows down the properties in received to those with counterparts in expected\n */\nfunction narrow(expected, received) {\n    return Object.keys(received)\n        .filter((prop) => expected[prop])\n        .reduce((obj, prop) => Object.assign(obj, {\n        [prop]: received[prop],\n    }), {});\n}\n// Highlights only style rules that were expected but were not found in the\n// received computed styles\nfunction expectedDiff(expected, received) {\n    const receivedNarrow = narrow(expected, received);\n    const diffOutput = (0, jest_diff_1.diff)(printoutStyles(expected), printoutStyles(receivedNarrow));\n    // Remove the \"+ Received\" annotation because this is a one-way diff\n    return diffOutput?.replace(`${chalk_1.default.red('+ Received')}\\n`, '') ?? '';\n}\nfunction toHaveStyle(element, style) {\n    (0, utils_1.checkReactElement)(element, toHaveStyle, this);\n    const expected = (react_native_1.StyleSheet.flatten(style) ?? {});\n    const received = (react_native_1.StyleSheet.flatten(element.props.style) ?? {});\n    return {\n        pass: Object.entries(expected).every(([prop, value]) => this.equals(received?.[prop], value)),\n        message: () => {\n            const matcher = `${this.isNot ? '.not' : ''}.toHaveStyle`;\n            return [(0, jest_matcher_utils_1.matcherHint)(matcher, 'element', ''), expectedDiff(expected, received)].join('\\n\\n');\n        },\n    };\n}\nexports.toHaveStyle = toHaveStyle;\n"],"mappings":"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","ignoreList":[]}