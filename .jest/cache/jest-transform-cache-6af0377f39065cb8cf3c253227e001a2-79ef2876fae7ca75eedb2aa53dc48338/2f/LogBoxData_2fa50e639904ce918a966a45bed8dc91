e75d552d2354f7e744e032fd7be66a87
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addException = addException;
exports.addIgnorePatterns = addIgnorePatterns;
exports.addLog = addLog;
exports.checkWarningFilter = checkWarningFilter;
exports.clear = clear;
exports.clearErrors = clearErrors;
exports.clearWarnings = clearWarnings;
exports.dismiss = dismiss;
exports.getAppInfo = getAppInfo;
exports.getIgnorePatterns = getIgnorePatterns;
exports.isDisabled = isDisabled;
exports.isLogBoxErrorMessage = isLogBoxErrorMessage;
exports.isMessageIgnored = isMessageIgnored;
exports.observe = observe;
exports.reportLogBoxError = reportLogBoxError;
exports.retrySymbolicateLogNow = retrySymbolicateLogNow;
exports.setAppInfo = setAppInfo;
exports.setDisabled = setDisabled;
exports.setSelectedLog = setSelectedLog;
exports.setWarningFilter = setWarningFilter;
exports.symbolicateLogLazy = symbolicateLogLazy;
exports.symbolicateLogNow = symbolicateLogNow;
exports.withSubscription = withSubscription;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _parseErrorStack = _interopRequireDefault(require("../../Core/Devtools/parseErrorStack"));
var _NativeLogBox = _interopRequireDefault(require("../../NativeModules/specs/NativeLogBox"));
var _LogBoxLog = _interopRequireDefault(require("./LogBoxLog"));
var _parseLogBoxLog = require("./parseLogBoxLog");
var React = _interopRequireWildcard(require("react"));
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
'use strict';
var observers = new Set();
var ignorePatterns = new Set();
var appInfo = null;
var logs = new Set();
var updateTimeout = null;
var _isDisabled = false;
var _selectedIndex = -1;
var warningFilter = function warningFilter(format) {
  return {
    finalFormat: format,
    forceDialogImmediately: false,
    suppressDialog_LEGACY: true,
    suppressCompletely: false,
    monitorEvent: 'unknown',
    monitorListVersion: 0,
    monitorSampleRate: 1
  };
};
var LOGBOX_ERROR_MESSAGE = 'An error was thrown when attempting to render log messages via LogBox.';
function getNextState() {
  return {
    logs: logs,
    isDisabled: _isDisabled,
    selectedLogIndex: _selectedIndex
  };
}
function reportLogBoxError(error, componentStack) {
  var ExceptionsManager = require('../../Core/ExceptionsManager');
  error.message = `${LOGBOX_ERROR_MESSAGE}\n\n${error.message}`;
  if (componentStack != null) {
    error.componentStack = componentStack;
  }
  ExceptionsManager.handleException(error, true);
}
function isLogBoxErrorMessage(message) {
  return typeof message === 'string' && message.includes(LOGBOX_ERROR_MESSAGE);
}
function isMessageIgnored(message) {
  for (var pattern of ignorePatterns) {
    if (pattern instanceof RegExp && pattern.test(message) || typeof pattern === 'string' && message.includes(pattern)) {
      return true;
    }
  }
  return false;
}
function handleUpdate() {
  if (updateTimeout == null) {
    updateTimeout = setImmediate(function () {
      updateTimeout = null;
      var nextState = getNextState();
      observers.forEach(function (_ref) {
        var observer = _ref.observer;
        return observer(nextState);
      });
    });
  }
}
function appendNewLog(newLog) {
  if (isMessageIgnored(newLog.message.content)) {
    return;
  }
  var lastLog = Array.from(logs).pop();
  if (lastLog && lastLog.category === newLog.category) {
    lastLog.incrementCount();
    handleUpdate();
    return;
  }
  if (newLog.level === 'fatal') {
    var OPTIMISTIC_WAIT_TIME = 1000;
    var _addPendingLog = function addPendingLog() {
      logs.add(newLog);
      if (_selectedIndex < 0) {
        setSelectedLog(logs.size - 1);
      } else {
        handleUpdate();
      }
      _addPendingLog = null;
    };
    var optimisticTimeout = setTimeout(function () {
      if (_addPendingLog) {
        _addPendingLog();
      }
    }, OPTIMISTIC_WAIT_TIME);
    newLog.symbolicate(function (status) {
      if (_addPendingLog && status !== 'PENDING') {
        _addPendingLog();
        clearTimeout(optimisticTimeout);
      } else if (status !== 'PENDING') {
        handleUpdate();
      }
    });
  } else if (newLog.level === 'syntax') {
    logs.add(newLog);
    setSelectedLog(logs.size - 1);
  } else {
    logs.add(newLog);
    handleUpdate();
  }
}
function addLog(log) {
  var errorForStackTrace = new Error();
  setImmediate(function () {
    try {
      var _log$stack;
      var stack = (0, _parseErrorStack.default)((_log$stack = log.stack) != null ? _log$stack : errorForStackTrace == null ? void 0 : errorForStackTrace.stack);
      appendNewLog(new _LogBoxLog.default({
        level: log.level,
        message: log.message,
        isComponentError: false,
        stack: stack,
        category: log.category,
        componentStack: log.componentStack
      }));
    } catch (error) {
      reportLogBoxError(error);
    }
  });
}
function addException(error) {
  setImmediate(function () {
    try {
      appendNewLog(new _LogBoxLog.default((0, _parseLogBoxLog.parseLogBoxException)(error)));
    } catch (loggingError) {
      reportLogBoxError(loggingError);
    }
  });
}
function symbolicateLogNow(log) {
  log.symbolicate(function () {
    handleUpdate();
  });
}
function retrySymbolicateLogNow(log) {
  log.retrySymbolicate(function () {
    handleUpdate();
  });
}
function symbolicateLogLazy(log) {
  log.symbolicate();
}
function clear() {
  if (logs.size > 0) {
    logs = new Set();
    setSelectedLog(-1);
  }
}
function setSelectedLog(proposedNewIndex) {
  var oldIndex = _selectedIndex;
  var newIndex = proposedNewIndex;
  var logArray = Array.from(logs);
  var index = logArray.length - 1;
  while (index >= 0) {
    if (logArray[index].level === 'syntax') {
      newIndex = index;
      break;
    }
    index -= 1;
  }
  _selectedIndex = newIndex;
  handleUpdate();
  if (_NativeLogBox.default) {
    setTimeout(function () {
      if (oldIndex < 0 && newIndex >= 0) {
        _NativeLogBox.default.show();
      } else if (oldIndex >= 0 && newIndex < 0) {
        _NativeLogBox.default.hide();
      }
    }, 0);
  }
}
function clearWarnings() {
  var newLogs = Array.from(logs).filter(function (log) {
    return log.level !== 'warn';
  });
  if (newLogs.length !== logs.size) {
    logs = new Set(newLogs);
    setSelectedLog(-1);
    handleUpdate();
  }
}
function clearErrors() {
  var newLogs = Array.from(logs).filter(function (log) {
    return log.level !== 'error' && log.level !== 'fatal';
  });
  if (newLogs.length !== logs.size) {
    logs = new Set(newLogs);
    setSelectedLog(-1);
  }
}
function dismiss(log) {
  if (logs.has(log)) {
    logs.delete(log);
    handleUpdate();
  }
}
function setWarningFilter(filter) {
  warningFilter = filter;
}
function setAppInfo(info) {
  appInfo = info;
}
function getAppInfo() {
  return appInfo != null ? appInfo() : null;
}
function checkWarningFilter(format) {
  return warningFilter(format);
}
function getIgnorePatterns() {
  return Array.from(ignorePatterns);
}
function addIgnorePatterns(patterns) {
  var existingSize = ignorePatterns.size;
  patterns.forEach(function (pattern) {
    if (pattern instanceof RegExp) {
      for (var existingPattern of ignorePatterns) {
        if (existingPattern instanceof RegExp && existingPattern.toString() === pattern.toString()) {
          return;
        }
      }
      ignorePatterns.add(pattern);
    }
    ignorePatterns.add(pattern);
  });
  if (ignorePatterns.size === existingSize) {
    return;
  }
  logs = new Set(Array.from(logs).filter(function (log) {
    return !isMessageIgnored(log.message.content);
  }));
  handleUpdate();
}
function setDisabled(value) {
  if (value === _isDisabled) {
    return;
  }
  _isDisabled = value;
  handleUpdate();
}
function isDisabled() {
  return _isDisabled;
}
function observe(observer) {
  var subscription = {
    observer: observer
  };
  observers.add(subscription);
  observer(getNextState());
  return {
    unsubscribe: function unsubscribe() {
      observers.delete(subscription);
    }
  };
}
function withSubscription(WrappedComponent) {
  var LogBoxStateSubscription = function (_React$Component) {
    function LogBoxStateSubscription() {
      var _this;
      (0, _classCallCheck2.default)(this, LogBoxStateSubscription);
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      _this = _callSuper(this, LogBoxStateSubscription, [].concat(args));
      _this.state = {
        logs: new Set(),
        isDisabled: false,
        hasError: false,
        selectedLogIndex: -1
      };
      _this._handleDismiss = function () {
        var _this$state = _this.state,
          selectedLogIndex = _this$state.selectedLogIndex,
          stateLogs = _this$state.logs;
        var logsArray = Array.from(stateLogs);
        if (selectedLogIndex != null) {
          if (logsArray.length - 1 <= 0) {
            setSelectedLog(-1);
          } else if (selectedLogIndex >= logsArray.length - 1) {
            setSelectedLog(selectedLogIndex - 1);
          }
          dismiss(logsArray[selectedLogIndex]);
        }
      };
      _this._handleMinimize = function () {
        setSelectedLog(-1);
      };
      _this._handleSetSelectedLog = function (index) {
        setSelectedLog(index);
      };
      return _this;
    }
    (0, _inherits2.default)(LogBoxStateSubscription, _React$Component);
    return (0, _createClass2.default)(LogBoxStateSubscription, [{
      key: "componentDidCatch",
      value: function componentDidCatch(err, errorInfo) {
        reportLogBoxError(err, errorInfo.componentStack);
      }
    }, {
      key: "render",
      value: function render() {
        if (this.state.hasError) {
          return null;
        }
        return (0, _jsxRuntime.jsx)(WrappedComponent, {
          logs: Array.from(this.state.logs),
          isDisabled: this.state.isDisabled,
          selectedLogIndex: this.state.selectedLogIndex
        });
      }
    }, {
      key: "componentDidMount",
      value: function componentDidMount() {
        var _this2 = this;
        this._subscription = observe(function (data) {
          _this2.setState(data);
        });
      }
    }, {
      key: "componentWillUnmount",
      value: function componentWillUnmount() {
        if (this._subscription != null) {
          this._subscription.unsubscribe();
        }
      }
    }], [{
      key: "getDerivedStateFromError",
      value: function getDerivedStateFromError() {
        return {
          hasError: true
        };
      }
    }]);
  }(React.Component);
  return LogBoxStateSubscription;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFyc2VFcnJvclN0YWNrIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfTmF0aXZlTG9nQm94IiwiX0xvZ0JveExvZyIsIl9wYXJzZUxvZ0JveExvZyIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfanN4UnVudGltZSIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIl9jYWxsU3VwZXIiLCJvIiwiX2dldFByb3RvdHlwZU9mMiIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiY29uc3RydWN0b3IiLCJhcHBseSIsIkJvb2xlYW4iLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIiwib2JzZXJ2ZXJzIiwiU2V0IiwiaWdub3JlUGF0dGVybnMiLCJhcHBJbmZvIiwibG9ncyIsInVwZGF0ZVRpbWVvdXQiLCJfaXNEaXNhYmxlZCIsIl9zZWxlY3RlZEluZGV4Iiwid2FybmluZ0ZpbHRlciIsImZvcm1hdCIsImZpbmFsRm9ybWF0IiwiZm9yY2VEaWFsb2dJbW1lZGlhdGVseSIsInN1cHByZXNzRGlhbG9nX0xFR0FDWSIsInN1cHByZXNzQ29tcGxldGVseSIsIm1vbml0b3JFdmVudCIsIm1vbml0b3JMaXN0VmVyc2lvbiIsIm1vbml0b3JTYW1wbGVSYXRlIiwiTE9HQk9YX0VSUk9SX01FU1NBR0UiLCJnZXROZXh0U3RhdGUiLCJpc0Rpc2FibGVkIiwic2VsZWN0ZWRMb2dJbmRleCIsInJlcG9ydExvZ0JveEVycm9yIiwiZXJyb3IiLCJjb21wb25lbnRTdGFjayIsIkV4Y2VwdGlvbnNNYW5hZ2VyIiwibWVzc2FnZSIsImhhbmRsZUV4Y2VwdGlvbiIsImlzTG9nQm94RXJyb3JNZXNzYWdlIiwiaW5jbHVkZXMiLCJpc01lc3NhZ2VJZ25vcmVkIiwicGF0dGVybiIsIlJlZ0V4cCIsInRlc3QiLCJoYW5kbGVVcGRhdGUiLCJzZXRJbW1lZGlhdGUiLCJuZXh0U3RhdGUiLCJmb3JFYWNoIiwiX3JlZiIsIm9ic2VydmVyIiwiYXBwZW5kTmV3TG9nIiwibmV3TG9nIiwiY29udGVudCIsImxhc3RMb2ciLCJBcnJheSIsImZyb20iLCJwb3AiLCJjYXRlZ29yeSIsImluY3JlbWVudENvdW50IiwibGV2ZWwiLCJPUFRJTUlTVElDX1dBSVRfVElNRSIsImFkZFBlbmRpbmdMb2ciLCJhZGQiLCJzZXRTZWxlY3RlZExvZyIsInNpemUiLCJvcHRpbWlzdGljVGltZW91dCIsInNldFRpbWVvdXQiLCJzeW1ib2xpY2F0ZSIsInN0YXR1cyIsImNsZWFyVGltZW91dCIsImFkZExvZyIsImxvZyIsImVycm9yRm9yU3RhY2tUcmFjZSIsIkVycm9yIiwiX2xvZyRzdGFjayIsInN0YWNrIiwicGFyc2VFcnJvclN0YWNrIiwiTG9nQm94TG9nIiwiaXNDb21wb25lbnRFcnJvciIsImFkZEV4Y2VwdGlvbiIsInBhcnNlTG9nQm94RXhjZXB0aW9uIiwibG9nZ2luZ0Vycm9yIiwic3ltYm9saWNhdGVMb2dOb3ciLCJyZXRyeVN5bWJvbGljYXRlTG9nTm93IiwicmV0cnlTeW1ib2xpY2F0ZSIsInN5bWJvbGljYXRlTG9nTGF6eSIsImNsZWFyIiwicHJvcG9zZWROZXdJbmRleCIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJsb2dBcnJheSIsImluZGV4IiwibGVuZ3RoIiwiTmF0aXZlTG9nQm94Iiwic2hvdyIsImhpZGUiLCJjbGVhcldhcm5pbmdzIiwibmV3TG9ncyIsImZpbHRlciIsImNsZWFyRXJyb3JzIiwiZGlzbWlzcyIsImRlbGV0ZSIsInNldFdhcm5pbmdGaWx0ZXIiLCJzZXRBcHBJbmZvIiwiaW5mbyIsImdldEFwcEluZm8iLCJjaGVja1dhcm5pbmdGaWx0ZXIiLCJnZXRJZ25vcmVQYXR0ZXJucyIsImFkZElnbm9yZVBhdHRlcm5zIiwicGF0dGVybnMiLCJleGlzdGluZ1NpemUiLCJleGlzdGluZ1BhdHRlcm4iLCJ0b1N0cmluZyIsInNldERpc2FibGVkIiwidmFsdWUiLCJvYnNlcnZlIiwic3Vic2NyaXB0aW9uIiwidW5zdWJzY3JpYmUiLCJ3aXRoU3Vic2NyaXB0aW9uIiwiV3JhcHBlZENvbXBvbmVudCIsIkxvZ0JveFN0YXRlU3Vic2NyaXB0aW9uIiwiX1JlYWN0JENvbXBvbmVudCIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9sZW4iLCJhcmd1bWVudHMiLCJhcmdzIiwiX2tleSIsImNvbmNhdCIsInN0YXRlIiwiaGFzRXJyb3IiLCJfaGFuZGxlRGlzbWlzcyIsIl90aGlzJHN0YXRlIiwic3RhdGVMb2dzIiwibG9nc0FycmF5IiwiX2hhbmRsZU1pbmltaXplIiwiX2hhbmRsZVNldFNlbGVjdGVkTG9nIiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJjb21wb25lbnREaWRDYXRjaCIsImVyciIsImVycm9ySW5mbyIsInJlbmRlciIsImpzeCIsImNvbXBvbmVudERpZE1vdW50IiwiX3RoaXMyIiwiX3N1YnNjcmlwdGlvbiIsImRhdGEiLCJzZXRTdGF0ZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yIiwiQ29tcG9uZW50Il0sInNvdXJjZXMiOlsiTG9nQm94RGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0XG4gKiBAZm9ybWF0XG4gKi9cblxuKCd1c2Ugc3RyaWN0Jyk7XG5cbmltcG9ydCB0eXBlIHtFeHRlbmRlZEVycm9yfSBmcm9tICcuLi8uLi9Db3JlL0V4dGVuZGVkRXJyb3InO1xuaW1wb3J0IHR5cGUge0xvZ0xldmVsfSBmcm9tICcuL0xvZ0JveExvZyc7XG5pbXBvcnQgdHlwZSB7XG4gIENhdGVnb3J5LFxuICBDb21wb25lbnRTdGFjayxcbiAgRXh0ZW5kZWRFeGNlcHRpb25EYXRhLFxuICBNZXNzYWdlLFxufSBmcm9tICcuL3BhcnNlTG9nQm94TG9nJztcblxuaW1wb3J0IHBhcnNlRXJyb3JTdGFjayBmcm9tICcuLi8uLi9Db3JlL0RldnRvb2xzL3BhcnNlRXJyb3JTdGFjayc7XG5pbXBvcnQgTmF0aXZlTG9nQm94IGZyb20gJy4uLy4uL05hdGl2ZU1vZHVsZXMvc3BlY3MvTmF0aXZlTG9nQm94JztcbmltcG9ydCBMb2dCb3hMb2cgZnJvbSAnLi9Mb2dCb3hMb2cnO1xuaW1wb3J0IHtwYXJzZUxvZ0JveEV4Y2VwdGlvbn0gZnJvbSAnLi9wYXJzZUxvZ0JveExvZyc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgdHlwZSBMb2dCb3hMb2dzID0gU2V0PExvZ0JveExvZz47XG5leHBvcnQgdHlwZSBMb2dEYXRhID0gJFJlYWRPbmx5PHt8XG4gIGxldmVsOiBMb2dMZXZlbCxcbiAgbWVzc2FnZTogTWVzc2FnZSxcbiAgY2F0ZWdvcnk6IENhdGVnb3J5LFxuICBjb21wb25lbnRTdGFjazogQ29tcG9uZW50U3RhY2ssXG4gIHN0YWNrPzogc3RyaW5nLFxufH0+O1xuXG5leHBvcnQgdHlwZSBPYnNlcnZlciA9IChcbiAgJFJlYWRPbmx5PHt8XG4gICAgbG9nczogTG9nQm94TG9ncyxcbiAgICBpc0Rpc2FibGVkOiBib29sZWFuLFxuICAgIHNlbGVjdGVkTG9nSW5kZXg6IG51bWJlcixcbiAgfH0+LFxuKSA9PiB2b2lkO1xuXG5leHBvcnQgdHlwZSBJZ25vcmVQYXR0ZXJuID0gc3RyaW5nIHwgUmVnRXhwO1xuXG5leHBvcnQgdHlwZSBTdWJzY3JpcHRpb24gPSAkUmVhZE9ubHk8e3xcbiAgdW5zdWJzY3JpYmU6ICgpID0+IHZvaWQsXG58fT47XG5cbmV4cG9ydCB0eXBlIFdhcm5pbmdJbmZvID0ge3xcbiAgZmluYWxGb3JtYXQ6IHN0cmluZyxcbiAgZm9yY2VEaWFsb2dJbW1lZGlhdGVseTogYm9vbGVhbixcbiAgc3VwcHJlc3NEaWFsb2dfTEVHQUNZOiBib29sZWFuLFxuICBzdXBwcmVzc0NvbXBsZXRlbHk6IGJvb2xlYW4sXG4gIG1vbml0b3JFdmVudDogc3RyaW5nIHwgbnVsbCxcbiAgbW9uaXRvckxpc3RWZXJzaW9uOiBudW1iZXIsXG4gIG1vbml0b3JTYW1wbGVSYXRlOiBudW1iZXIsXG58fTtcblxuZXhwb3J0IHR5cGUgV2FybmluZ0ZpbHRlciA9IChmb3JtYXQ6IHN0cmluZykgPT4gV2FybmluZ0luZm87XG5cbnR5cGUgQXBwSW5mbyA9ICRSZWFkT25seTx7fFxuICBhcHBWZXJzaW9uOiBzdHJpbmcsXG4gIGVuZ2luZTogc3RyaW5nLFxuICBvblByZXNzPzogPygpID0+IHZvaWQsXG58fT47XG5cbmNvbnN0IG9ic2VydmVyczogU2V0PHtvYnNlcnZlcjogT2JzZXJ2ZXIsIC4uLn0+ID0gbmV3IFNldCgpO1xuY29uc3QgaWdub3JlUGF0dGVybnM6IFNldDxJZ25vcmVQYXR0ZXJuPiA9IG5ldyBTZXQoKTtcbmxldCBhcHBJbmZvOiA/KCkgPT4gQXBwSW5mbyA9IG51bGw7XG5sZXQgbG9nczogTG9nQm94TG9ncyA9IG5ldyBTZXQoKTtcbmxldCB1cGRhdGVUaW1lb3V0OiAkRmxvd0ZpeE1lIHwgbnVsbCA9IG51bGw7XG5sZXQgX2lzRGlzYWJsZWQgPSBmYWxzZTtcbmxldCBfc2VsZWN0ZWRJbmRleCA9IC0xO1xuXG5sZXQgd2FybmluZ0ZpbHRlcjogV2FybmluZ0ZpbHRlciA9IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgcmV0dXJuIHtcbiAgICBmaW5hbEZvcm1hdDogZm9ybWF0LFxuICAgIGZvcmNlRGlhbG9nSW1tZWRpYXRlbHk6IGZhbHNlLFxuICAgIHN1cHByZXNzRGlhbG9nX0xFR0FDWTogdHJ1ZSxcbiAgICBzdXBwcmVzc0NvbXBsZXRlbHk6IGZhbHNlLFxuICAgIG1vbml0b3JFdmVudDogJ3Vua25vd24nLFxuICAgIG1vbml0b3JMaXN0VmVyc2lvbjogMCxcbiAgICBtb25pdG9yU2FtcGxlUmF0ZTogMSxcbiAgfTtcbn07XG5cbmNvbnN0IExPR0JPWF9FUlJPUl9NRVNTQUdFID1cbiAgJ0FuIGVycm9yIHdhcyB0aHJvd24gd2hlbiBhdHRlbXB0aW5nIHRvIHJlbmRlciBsb2cgbWVzc2FnZXMgdmlhIExvZ0JveC4nO1xuXG5mdW5jdGlvbiBnZXROZXh0U3RhdGUoKSB7XG4gIHJldHVybiB7XG4gICAgbG9ncyxcbiAgICBpc0Rpc2FibGVkOiBfaXNEaXNhYmxlZCxcbiAgICBzZWxlY3RlZExvZ0luZGV4OiBfc2VsZWN0ZWRJbmRleCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcG9ydExvZ0JveEVycm9yKFxuICBlcnJvcjogRXh0ZW5kZWRFcnJvcixcbiAgY29tcG9uZW50U3RhY2s/OiBzdHJpbmcsXG4pOiB2b2lkIHtcbiAgY29uc3QgRXhjZXB0aW9uc01hbmFnZXIgPSByZXF1aXJlKCcuLi8uLi9Db3JlL0V4Y2VwdGlvbnNNYW5hZ2VyJyk7XG5cbiAgZXJyb3IubWVzc2FnZSA9IGAke0xPR0JPWF9FUlJPUl9NRVNTQUdFfVxcblxcbiR7ZXJyb3IubWVzc2FnZX1gO1xuICBpZiAoY29tcG9uZW50U3RhY2sgIT0gbnVsbCkge1xuICAgIGVycm9yLmNvbXBvbmVudFN0YWNrID0gY29tcG9uZW50U3RhY2s7XG4gIH1cbiAgRXhjZXB0aW9uc01hbmFnZXIuaGFuZGxlRXhjZXB0aW9uKGVycm9yLCAvKiBpc0ZhdGFsICovIHRydWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNMb2dCb3hFcnJvck1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycgJiYgbWVzc2FnZS5pbmNsdWRlcyhMT0dCT1hfRVJST1JfTUVTU0FHRSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc01lc3NhZ2VJZ25vcmVkKG1lc3NhZ2U6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgaWdub3JlUGF0dGVybnMpIHtcbiAgICBpZiAoXG4gICAgICAocGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCAmJiBwYXR0ZXJuLnRlc3QobWVzc2FnZSkpIHx8XG4gICAgICAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnICYmIG1lc3NhZ2UuaW5jbHVkZXMocGF0dGVybikpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVVcGRhdGUoKTogdm9pZCB7XG4gIGlmICh1cGRhdGVUaW1lb3V0ID09IG51bGwpIHtcbiAgICB1cGRhdGVUaW1lb3V0ID0gc2V0SW1tZWRpYXRlKCgpID0+IHtcbiAgICAgIHVwZGF0ZVRpbWVvdXQgPSBudWxsO1xuICAgICAgY29uc3QgbmV4dFN0YXRlID0gZ2V0TmV4dFN0YXRlKCk7XG4gICAgICBvYnNlcnZlcnMuZm9yRWFjaCgoe29ic2VydmVyfSkgPT4gb2JzZXJ2ZXIobmV4dFN0YXRlKSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwZW5kTmV3TG9nKG5ld0xvZzogTG9nQm94TG9nKSB7XG4gIC8vIERvbid0IHdhbnQgc3RvcmUgdGhlc2UgbG9ncyBiZWNhdXNlIHRoZXkgdHJpZ2dlciBhXG4gIC8vIHN0YXRlIHVwZGF0ZSB3aGVuIHdlIGFkZCB0aGVtIHRvIHRoZSBzdG9yZS5cbiAgaWYgKGlzTWVzc2FnZUlnbm9yZWQobmV3TG9nLm1lc3NhZ2UuY29udGVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB0aGUgbmV4dCBsb2cgaGFzIHRoZSBzYW1lIGNhdGVnb3J5IGFzIHRoZSBwcmV2aW91cyBvbmVcbiAgLy8gdGhlbiByb2xsIGl0IHVwIGludG8gdGhlIGxhc3QgbG9nIGluIHRoZSBsaXN0IGJ5IGluY3JlbWVudGluZ1xuICAvLyB0aGUgY291bnQgKHNpbWlsYXIgdG8gaG93IENocm9tZSBkb2VzIGl0KS5cbiAgY29uc3QgbGFzdExvZyA9IEFycmF5LmZyb20obG9ncykucG9wKCk7XG4gIGlmIChsYXN0TG9nICYmIGxhc3RMb2cuY2F0ZWdvcnkgPT09IG5ld0xvZy5jYXRlZ29yeSkge1xuICAgIGxhc3RMb2cuaW5jcmVtZW50Q291bnQoKTtcbiAgICBoYW5kbGVVcGRhdGUoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAobmV3TG9nLmxldmVsID09PSAnZmF0YWwnKSB7XG4gICAgLy8gSWYgcG9zc2libGUsIHRvIGF2b2lkIGphbmssIHdlIGRvbid0IHdhbnQgdG8gb3BlbiB0aGUgZXJyb3IgYmVmb3JlXG4gICAgLy8gaXQncyBzeW1ib2xpY2F0ZWQuIFRvIGRvIHRoYXQsIHdlIG9wdGltaXN0aWNhbGx5IHdhaXQgZm9yXG4gICAgLy8gc3ltYm9saWNhdGlvbiBmb3IgdXAgdG8gYSBzZWNvbmQgYmVmb3JlIGFkZGluZyB0aGUgbG9nLlxuICAgIGNvbnN0IE9QVElNSVNUSUNfV0FJVF9USU1FID0gMTAwMDtcblxuICAgIGxldCBhZGRQZW5kaW5nTG9nOiA/KCkgPT4gdm9pZCA9ICgpID0+IHtcbiAgICAgIGxvZ3MuYWRkKG5ld0xvZyk7XG4gICAgICBpZiAoX3NlbGVjdGVkSW5kZXggPCAwKSB7XG4gICAgICAgIHNldFNlbGVjdGVkTG9nKGxvZ3Muc2l6ZSAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGFuZGxlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgICBhZGRQZW5kaW5nTG9nID0gbnVsbDtcbiAgICB9O1xuXG4gICAgY29uc3Qgb3B0aW1pc3RpY1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChhZGRQZW5kaW5nTG9nKSB7XG4gICAgICAgIGFkZFBlbmRpbmdMb2coKTtcbiAgICAgIH1cbiAgICB9LCBPUFRJTUlTVElDX1dBSVRfVElNRSk7XG5cbiAgICBuZXdMb2cuc3ltYm9saWNhdGUoc3RhdHVzID0+IHtcbiAgICAgIGlmIChhZGRQZW5kaW5nTG9nICYmIHN0YXR1cyAhPT0gJ1BFTkRJTkcnKSB7XG4gICAgICAgIGFkZFBlbmRpbmdMb2coKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KG9wdGltaXN0aWNUaW1lb3V0KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzICE9PSAnUEVORElORycpIHtcbiAgICAgICAgLy8gVGhlIGxvZyBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkIGJ1dCB3ZSBuZWVkIHRvIHRyaWdnZXIgYSByZW5kZXIuXG4gICAgICAgIGhhbmRsZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKG5ld0xvZy5sZXZlbCA9PT0gJ3N5bnRheCcpIHtcbiAgICBsb2dzLmFkZChuZXdMb2cpO1xuICAgIHNldFNlbGVjdGVkTG9nKGxvZ3Muc2l6ZSAtIDEpO1xuICB9IGVsc2Uge1xuICAgIGxvZ3MuYWRkKG5ld0xvZyk7XG4gICAgaGFuZGxlVXBkYXRlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZExvZyhsb2c6IExvZ0RhdGEpOiB2b2lkIHtcbiAgY29uc3QgZXJyb3JGb3JTdGFja1RyYWNlID0gbmV3IEVycm9yKCk7XG5cbiAgLy8gUGFyc2luZyBsb2dzIGFyZSBleHBlbnNpdmUgc28gd2Ugc2NoZWR1bGUgdGhpc1xuICAvLyBvdGhlcndpc2Ugc3BhbW15IGxvZ3Mgd291bGQgcGF1c2UgcmVuZGVyaW5nLlxuICBzZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFjayA9IHBhcnNlRXJyb3JTdGFjayhsb2cuc3RhY2sgPz8gZXJyb3JGb3JTdGFja1RyYWNlPy5zdGFjayk7XG5cbiAgICAgIGFwcGVuZE5ld0xvZyhcbiAgICAgICAgbmV3IExvZ0JveExvZyh7XG4gICAgICAgICAgbGV2ZWw6IGxvZy5sZXZlbCxcbiAgICAgICAgICBtZXNzYWdlOiBsb2cubWVzc2FnZSxcbiAgICAgICAgICBpc0NvbXBvbmVudEVycm9yOiBmYWxzZSxcbiAgICAgICAgICBzdGFjayxcbiAgICAgICAgICBjYXRlZ29yeTogbG9nLmNhdGVnb3J5LFxuICAgICAgICAgIGNvbXBvbmVudFN0YWNrOiBsb2cuY29tcG9uZW50U3RhY2ssXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVwb3J0TG9nQm94RXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRFeGNlcHRpb24oZXJyb3I6IEV4dGVuZGVkRXhjZXB0aW9uRGF0YSk6IHZvaWQge1xuICAvLyBQYXJzaW5nIGxvZ3MgYXJlIGV4cGVuc2l2ZSBzbyB3ZSBzY2hlZHVsZSB0aGlzXG4gIC8vIG90aGVyd2lzZSBzcGFtbXkgbG9ncyB3b3VsZCBwYXVzZSByZW5kZXJpbmcuXG4gIHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGFwcGVuZE5ld0xvZyhuZXcgTG9nQm94TG9nKHBhcnNlTG9nQm94RXhjZXB0aW9uKGVycm9yKSkpO1xuICAgIH0gY2F0Y2ggKGxvZ2dpbmdFcnJvcikge1xuICAgICAgcmVwb3J0TG9nQm94RXJyb3IobG9nZ2luZ0Vycm9yKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3ltYm9saWNhdGVMb2dOb3cobG9nOiBMb2dCb3hMb2cpIHtcbiAgbG9nLnN5bWJvbGljYXRlKCgpID0+IHtcbiAgICBoYW5kbGVVcGRhdGUoKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXRyeVN5bWJvbGljYXRlTG9nTm93KGxvZzogTG9nQm94TG9nKSB7XG4gIGxvZy5yZXRyeVN5bWJvbGljYXRlKCgpID0+IHtcbiAgICBoYW5kbGVVcGRhdGUoKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzeW1ib2xpY2F0ZUxvZ0xhenkobG9nOiBMb2dCb3hMb2cpIHtcbiAgbG9nLnN5bWJvbGljYXRlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpOiB2b2lkIHtcbiAgaWYgKGxvZ3Muc2l6ZSA+IDApIHtcbiAgICBsb2dzID0gbmV3IFNldCgpO1xuICAgIHNldFNlbGVjdGVkTG9nKC0xKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0U2VsZWN0ZWRMb2cocHJvcG9zZWROZXdJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGNvbnN0IG9sZEluZGV4ID0gX3NlbGVjdGVkSW5kZXg7XG4gIGxldCBuZXdJbmRleCA9IHByb3Bvc2VkTmV3SW5kZXg7XG5cbiAgY29uc3QgbG9nQXJyYXkgPSBBcnJheS5mcm9tKGxvZ3MpO1xuICBsZXQgaW5kZXggPSBsb2dBcnJheS5sZW5ndGggLSAxO1xuICB3aGlsZSAoaW5kZXggPj0gMCkge1xuICAgIC8vIFRoZSBsYXRlc3Qgc3ludGF4IGVycm9yIGlzIHNlbGVjdGVkIGFuZCBkaXNwbGF5ZWQgYmVmb3JlIGFsbCBvdGhlciBsb2dzLlxuICAgIGlmIChsb2dBcnJheVtpbmRleF0ubGV2ZWwgPT09ICdzeW50YXgnKSB7XG4gICAgICBuZXdJbmRleCA9IGluZGV4O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGluZGV4IC09IDE7XG4gIH1cbiAgX3NlbGVjdGVkSW5kZXggPSBuZXdJbmRleDtcbiAgaGFuZGxlVXBkYXRlKCk7XG4gIGlmIChOYXRpdmVMb2dCb3gpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChvbGRJbmRleCA8IDAgJiYgbmV3SW5kZXggPj0gMCkge1xuICAgICAgICBOYXRpdmVMb2dCb3guc2hvdygpO1xuICAgICAgfSBlbHNlIGlmIChvbGRJbmRleCA+PSAwICYmIG5ld0luZGV4IDwgMCkge1xuICAgICAgICBOYXRpdmVMb2dCb3guaGlkZSgpO1xuICAgICAgfVxuICAgIH0sIDApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcldhcm5pbmdzKCk6IHZvaWQge1xuICBjb25zdCBuZXdMb2dzID0gQXJyYXkuZnJvbShsb2dzKS5maWx0ZXIobG9nID0+IGxvZy5sZXZlbCAhPT0gJ3dhcm4nKTtcbiAgaWYgKG5ld0xvZ3MubGVuZ3RoICE9PSBsb2dzLnNpemUpIHtcbiAgICBsb2dzID0gbmV3IFNldChuZXdMb2dzKTtcbiAgICBzZXRTZWxlY3RlZExvZygtMSk7XG4gICAgaGFuZGxlVXBkYXRlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRXJyb3JzKCk6IHZvaWQge1xuICBjb25zdCBuZXdMb2dzID0gQXJyYXkuZnJvbShsb2dzKS5maWx0ZXIoXG4gICAgbG9nID0+IGxvZy5sZXZlbCAhPT0gJ2Vycm9yJyAmJiBsb2cubGV2ZWwgIT09ICdmYXRhbCcsXG4gICk7XG4gIGlmIChuZXdMb2dzLmxlbmd0aCAhPT0gbG9ncy5zaXplKSB7XG4gICAgbG9ncyA9IG5ldyBTZXQobmV3TG9ncyk7XG4gICAgc2V0U2VsZWN0ZWRMb2coLTEpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNtaXNzKGxvZzogTG9nQm94TG9nKTogdm9pZCB7XG4gIGlmIChsb2dzLmhhcyhsb2cpKSB7XG4gICAgbG9ncy5kZWxldGUobG9nKTtcbiAgICBoYW5kbGVVcGRhdGUoKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0V2FybmluZ0ZpbHRlcihmaWx0ZXI6IFdhcm5pbmdGaWx0ZXIpOiB2b2lkIHtcbiAgd2FybmluZ0ZpbHRlciA9IGZpbHRlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEFwcEluZm8oaW5mbzogKCkgPT4gQXBwSW5mbyk6IHZvaWQge1xuICBhcHBJbmZvID0gaW5mbztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcEluZm8oKTogP0FwcEluZm8ge1xuICByZXR1cm4gYXBwSW5mbyAhPSBudWxsID8gYXBwSW5mbygpIDogbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrV2FybmluZ0ZpbHRlcihmb3JtYXQ6IHN0cmluZyk6IFdhcm5pbmdJbmZvIHtcbiAgcmV0dXJuIHdhcm5pbmdGaWx0ZXIoZm9ybWF0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElnbm9yZVBhdHRlcm5zKCk6ICRSZWFkT25seUFycmF5PElnbm9yZVBhdHRlcm4+IHtcbiAgcmV0dXJuIEFycmF5LmZyb20oaWdub3JlUGF0dGVybnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkSWdub3JlUGF0dGVybnMoXG4gIHBhdHRlcm5zOiAkUmVhZE9ubHlBcnJheTxJZ25vcmVQYXR0ZXJuPixcbik6IHZvaWQge1xuICBjb25zdCBleGlzdGluZ1NpemUgPSBpZ25vcmVQYXR0ZXJucy5zaXplO1xuICAvLyBUaGUgc2FtZSBwYXR0ZXJuIG1heSBiZSBhZGRlZCBtdWx0aXBsZSB0aW1lcywgYnV0IGFkZGluZyBhIG5ldyBwYXR0ZXJuXG4gIC8vIGNhbiBiZSBleHBlbnNpdmUgc28gbGV0J3MgZmluZCBvbmx5IHRoZSBvbmVzIHRoYXQgYXJlIG5ldy5cbiAgcGF0dGVybnMuZm9yRWFjaCgocGF0dGVybjogSWdub3JlUGF0dGVybikgPT4ge1xuICAgIGlmIChwYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICBmb3IgKGNvbnN0IGV4aXN0aW5nUGF0dGVybiBvZiBpZ25vcmVQYXR0ZXJucykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZXhpc3RpbmdQYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwICYmXG4gICAgICAgICAgZXhpc3RpbmdQYXR0ZXJuLnRvU3RyaW5nKCkgPT09IHBhdHRlcm4udG9TdHJpbmcoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlnbm9yZVBhdHRlcm5zLmFkZChwYXR0ZXJuKTtcbiAgICB9XG4gICAgaWdub3JlUGF0dGVybnMuYWRkKHBhdHRlcm4pO1xuICB9KTtcbiAgaWYgKGlnbm9yZVBhdHRlcm5zLnNpemUgPT09IGV4aXN0aW5nU2l6ZSkge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBXZSBuZWVkIHRvIHJlY2hlY2sgYWxsIG9mIHRoZSBleGlzdGluZyBsb2dzLlxuICAvLyBUaGlzIGFsbG93cyBhZGRpbmcgYW4gaWdub3JlIHBhdHRlcm4gYW55d2hlcmUgaW4gdGhlIGNvZGViYXNlLlxuICAvLyBXaXRob3V0IHRoaXMsIGlmIHlvdSBpZ25vcmUgYSBwYXR0ZXJuIGFmdGVyIHRoZSBhIGxvZyBpcyBjcmVhdGVkLFxuICAvLyB0aGVuIHdlIHdvdWxkIGtlZXAgc2hvd2luZyB0aGUgbG9nLlxuICBsb2dzID0gbmV3IFNldChcbiAgICBBcnJheS5mcm9tKGxvZ3MpLmZpbHRlcihsb2cgPT4gIWlzTWVzc2FnZUlnbm9yZWQobG9nLm1lc3NhZ2UuY29udGVudCkpLFxuICApO1xuICBoYW5kbGVVcGRhdGUoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERpc2FibGVkKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gIGlmICh2YWx1ZSA9PT0gX2lzRGlzYWJsZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgX2lzRGlzYWJsZWQgPSB2YWx1ZTtcbiAgaGFuZGxlVXBkYXRlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc2FibGVkKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gX2lzRGlzYWJsZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvYnNlcnZlKG9ic2VydmVyOiBPYnNlcnZlcik6IFN1YnNjcmlwdGlvbiB7XG4gIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHtvYnNlcnZlcn07XG4gIG9ic2VydmVycy5hZGQoc3Vic2NyaXB0aW9uKTtcblxuICBvYnNlcnZlcihnZXROZXh0U3RhdGUoKSk7XG5cbiAgcmV0dXJuIHtcbiAgICB1bnN1YnNjcmliZSgpOiB2b2lkIHtcbiAgICAgIG9ic2VydmVycy5kZWxldGUoc3Vic2NyaXB0aW9uKTtcbiAgICB9LFxuICB9O1xufVxuXG50eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8fH0+O1xudHlwZSBTdGF0ZSA9ICRSZWFkT25seTx7fFxuICBsb2dzOiBMb2dCb3hMb2dzLFxuICBpc0Rpc2FibGVkOiBib29sZWFuLFxuICBoYXNFcnJvcjogYm9vbGVhbixcbiAgc2VsZWN0ZWRMb2dJbmRleDogbnVtYmVyLFxufH0+O1xuXG50eXBlIFN1YnNjcmliZWRDb21wb25lbnQgPSBSZWFjdC5BYnN0cmFjdENvbXBvbmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgbG9nczogJFJlYWRPbmx5QXJyYXk8TG9nQm94TG9nPixcbiAgICBpc0Rpc2FibGVkOiBib29sZWFuLFxuICAgIHNlbGVjdGVkTG9nSW5kZXg6IG51bWJlcixcbiAgfH0+LFxuPjtcblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhTdWJzY3JpcHRpb24oXG4gIFdyYXBwZWRDb21wb25lbnQ6IFN1YnNjcmliZWRDb21wb25lbnQsXG4pOiBSZWFjdC5BYnN0cmFjdENvbXBvbmVudDx7fHx9PiB7XG4gIGNsYXNzIExvZ0JveFN0YXRlU3Vic2NyaXB0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICAgIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoKToge2hhc0Vycm9yOiBib29sZWFufSB7XG4gICAgICByZXR1cm4ge2hhc0Vycm9yOiB0cnVlfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRDYXRjaChlcnI6IEVycm9yLCBlcnJvckluZm86IHtjb21wb25lbnRTdGFjazogc3RyaW5nLCAuLi59KSB7XG4gICAgICAvKiAkRmxvd0ZpeE1lW2NsYXNzLW9iamVjdC1zdWJ0eXBpbmddIGFkZGVkIHdoZW4gaW1wcm92aW5nIHR5cGluZyBmb3JcbiAgICAgICAqIHRoaXMgcGFyYW1ldGVycyAqL1xuICAgICAgcmVwb3J0TG9nQm94RXJyb3IoZXJyLCBlcnJvckluZm8uY29tcG9uZW50U3RhY2spO1xuICAgIH1cblxuICAgIF9zdWJzY3JpcHRpb246ID9TdWJzY3JpcHRpb247XG5cbiAgICBzdGF0ZTogU3RhdGUgPSB7XG4gICAgICBsb2dzOiBuZXcgU2V0KCksXG4gICAgICBpc0Rpc2FibGVkOiBmYWxzZSxcbiAgICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICAgIHNlbGVjdGVkTG9nSW5kZXg6IC0xLFxuICAgIH07XG5cbiAgICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikge1xuICAgICAgICAvLyBUaGlzIGhhcHBlbnMgd2hlbiB0aGUgY29tcG9uZW50IGZhaWxlZCB0byByZW5kZXIsIGluIHdoaWNoIGNhc2Ugd2UgZGVsZWdhdGUgdG8gdGhlIG5hdGl2ZSByZWRib3guXG4gICAgICAgIC8vIFdlIGNhbid0IHNob3cgYW55YmFjayBmYWxsYmFjayBVSSBoZXJlLCBiZWNhdXNlIHRoZSBlcnJvciBtYXkgYmUgd2l0aCA8Vmlldz4gb3IgPFRleHQ+LlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFdyYXBwZWRDb21wb25lbnRcbiAgICAgICAgICBsb2dzPXtBcnJheS5mcm9tKHRoaXMuc3RhdGUubG9ncyl9XG4gICAgICAgICAgaXNEaXNhYmxlZD17dGhpcy5zdGF0ZS5pc0Rpc2FibGVkfVxuICAgICAgICAgIHNlbGVjdGVkTG9nSW5kZXg9e3RoaXMuc3RhdGUuc2VsZWN0ZWRMb2dJbmRleH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKTogdm9pZCB7XG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb24gPSBvYnNlcnZlKGRhdGEgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2hhbmRsZURpc21pc3MgPSAoKTogdm9pZCA9PiB7XG4gICAgICAvLyBIZXJlIHdlIGhhbmRsZSB0aGUgY2FzZXMgd2hlbiB0aGUgbG9nIGlzIGRpc21pc3NlZCBhbmQgaXRcbiAgICAgIC8vIHdhcyBlaXRoZXIgdGhlIGxhc3QgbG9nLCBvciB3aGVuIHRoZSBjdXJyZW50IGluZGV4XG4gICAgICAvLyBpcyBub3cgb3V0c2lkZSB0aGUgYm91bmRzIG9mIHRoZSBsb2cgYXJyYXkuXG4gICAgICBjb25zdCB7c2VsZWN0ZWRMb2dJbmRleCwgbG9nczogc3RhdGVMb2dzfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCBsb2dzQXJyYXkgPSBBcnJheS5mcm9tKHN0YXRlTG9ncyk7XG4gICAgICBpZiAoc2VsZWN0ZWRMb2dJbmRleCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChsb2dzQXJyYXkubGVuZ3RoIC0gMSA8PSAwKSB7XG4gICAgICAgICAgc2V0U2VsZWN0ZWRMb2coLTEpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkTG9nSW5kZXggPj0gbG9nc0FycmF5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBzZXRTZWxlY3RlZExvZyhzZWxlY3RlZExvZ0luZGV4IC0gMSk7XG4gICAgICAgIH1cblxuICAgICAgICBkaXNtaXNzKGxvZ3NBcnJheVtzZWxlY3RlZExvZ0luZGV4XSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9oYW5kbGVNaW5pbWl6ZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgIHNldFNlbGVjdGVkTG9nKC0xKTtcbiAgICB9O1xuXG4gICAgX2hhbmRsZVNldFNlbGVjdGVkTG9nID0gKGluZGV4OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICAgIHNldFNlbGVjdGVkTG9nKGluZGV4KTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIExvZ0JveFN0YXRlU3Vic2NyaXB0aW9uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQSxJQUFBQSxnQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsVUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsZUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksS0FBQSxHQUFBQyx1QkFBQSxDQUFBTCxPQUFBO0FBQStCLElBQUFNLFdBQUEsR0FBQU4sT0FBQTtBQUFBLFNBQUFPLHlCQUFBQyxDQUFBLDZCQUFBQyxPQUFBLG1CQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxDQUFBLFdBQUFBLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLEtBQUFGLENBQUE7QUFBQSxTQUFBSCx3QkFBQUcsQ0FBQSxFQUFBRSxDQUFBLFNBQUFBLENBQUEsSUFBQUYsQ0FBQSxJQUFBQSxDQUFBLENBQUFJLFVBQUEsU0FBQUosQ0FBQSxlQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFdBQUFLLE9BQUEsRUFBQUwsQ0FBQSxRQUFBRyxDQUFBLEdBQUFKLHdCQUFBLENBQUFHLENBQUEsT0FBQUMsQ0FBQSxJQUFBQSxDQUFBLENBQUFHLEdBQUEsQ0FBQU4sQ0FBQSxVQUFBRyxDQUFBLENBQUFJLEdBQUEsQ0FBQVAsQ0FBQSxPQUFBUSxDQUFBLEtBQUFDLFNBQUEsVUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLGNBQUEsSUFBQUQsTUFBQSxDQUFBRSx3QkFBQSxXQUFBQyxDQUFBLElBQUFkLENBQUEsb0JBQUFjLENBQUEsT0FBQUMsY0FBQSxDQUFBQyxJQUFBLENBQUFoQixDQUFBLEVBQUFjLENBQUEs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