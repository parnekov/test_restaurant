e2efe222596504aa1b8d519de26778b9
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.joinAlignedDiffsNoExpand = exports.joinAlignedDiffsExpand = void 0;
var _cleanupSemantic = require('./cleanupSemantic');
var formatTrailingSpaces = function formatTrailingSpaces(line, trailingSpaceFormatter) {
  return line.replace(/\s+$/, function (match) {
    return trailingSpaceFormatter(match);
  });
};
var printDiffLine = function printDiffLine(line, isFirstOrLast, color, indicator, trailingSpaceFormatter, emptyFirstOrLastLinePlaceholder) {
  return line.length !== 0 ? color(`${indicator} ${formatTrailingSpaces(line, trailingSpaceFormatter)}`) : indicator !== ' ' ? color(indicator) : isFirstOrLast && emptyFirstOrLastLinePlaceholder.length !== 0 ? color(`${indicator} ${emptyFirstOrLastLinePlaceholder}`) : '';
};
var printDeleteLine = function printDeleteLine(line, isFirstOrLast, _ref) {
  var aColor = _ref.aColor,
    aIndicator = _ref.aIndicator,
    changeLineTrailingSpaceColor = _ref.changeLineTrailingSpaceColor,
    emptyFirstOrLastLinePlaceholder = _ref.emptyFirstOrLastLinePlaceholder;
  return printDiffLine(line, isFirstOrLast, aColor, aIndicator, changeLineTrailingSpaceColor, emptyFirstOrLastLinePlaceholder);
};
var printInsertLine = function printInsertLine(line, isFirstOrLast, _ref2) {
  var bColor = _ref2.bColor,
    bIndicator = _ref2.bIndicator,
    changeLineTrailingSpaceColor = _ref2.changeLineTrailingSpaceColor,
    emptyFirstOrLastLinePlaceholder = _ref2.emptyFirstOrLastLinePlaceholder;
  return printDiffLine(line, isFirstOrLast, bColor, bIndicator, changeLineTrailingSpaceColor, emptyFirstOrLastLinePlaceholder);
};
var printCommonLine = function printCommonLine(line, isFirstOrLast, _ref3) {
  var commonColor = _ref3.commonColor,
    commonIndicator = _ref3.commonIndicator,
    commonLineTrailingSpaceColor = _ref3.commonLineTrailingSpaceColor,
    emptyFirstOrLastLinePlaceholder = _ref3.emptyFirstOrLastLinePlaceholder;
  return printDiffLine(line, isFirstOrLast, commonColor, commonIndicator, commonLineTrailingSpaceColor, emptyFirstOrLastLinePlaceholder);
};
var createPatchMark = function createPatchMark(aStart, aEnd, bStart, bEnd, _ref4) {
  var patchColor = _ref4.patchColor;
  return patchColor(`@@ -${aStart + 1},${aEnd - aStart} +${bStart + 1},${bEnd - bStart} @@`);
};
var joinAlignedDiffsNoExpand = function joinAlignedDiffsNoExpand(diffs, options) {
  var iLength = diffs.length;
  var nContextLines = options.contextLines;
  var nContextLines2 = nContextLines + nContextLines;
  var jLength = iLength;
  var hasExcessAtStartOrEnd = false;
  var nExcessesBetweenChanges = 0;
  var i = 0;
  while (i !== iLength) {
    var iStart = i;
    while (i !== iLength && diffs[i][0] === _cleanupSemantic.DIFF_EQUAL) {
      i += 1;
    }
    if (iStart !== i) {
      if (iStart === 0) {
        if (i > nContextLines) {
          jLength -= i - nContextLines;
          hasExcessAtStartOrEnd = true;
        }
      } else if (i === iLength) {
        var n = i - iStart;
        if (n > nContextLines) {
          jLength -= n - nContextLines;
          hasExcessAtStartOrEnd = true;
        }
      } else {
        var _n = i - iStart;
        if (_n > nContextLines2) {
          jLength -= _n - nContextLines2;
          nExcessesBetweenChanges += 1;
        }
      }
    }
    while (i !== iLength && diffs[i][0] !== _cleanupSemantic.DIFF_EQUAL) {
      i += 1;
    }
  }
  var hasPatch = nExcessesBetweenChanges !== 0 || hasExcessAtStartOrEnd;
  if (nExcessesBetweenChanges !== 0) {
    jLength += nExcessesBetweenChanges + 1;
  } else if (hasExcessAtStartOrEnd) {
    jLength += 1;
  }
  var jLast = jLength - 1;
  var lines = [];
  var jPatchMark = 0;
  if (hasPatch) {
    lines.push('');
  }
  var aStart = 0;
  var bStart = 0;
  var aEnd = 0;
  var bEnd = 0;
  var pushCommonLine = function pushCommonLine(line) {
    var j = lines.length;
    lines.push(printCommonLine(line, j === 0 || j === jLast, options));
    aEnd += 1;
    bEnd += 1;
  };
  var pushDeleteLine = function pushDeleteLine(line) {
    var j = lines.length;
    lines.push(printDeleteLine(line, j === 0 || j === jLast, options));
    aEnd += 1;
  };
  var pushInsertLine = function pushInsertLine(line) {
    var j = lines.length;
    lines.push(printInsertLine(line, j === 0 || j === jLast, options));
    bEnd += 1;
  };
  i = 0;
  while (i !== iLength) {
    var _iStart = i;
    while (i !== iLength && diffs[i][0] === _cleanupSemantic.DIFF_EQUAL) {
      i += 1;
    }
    if (_iStart !== i) {
      if (_iStart === 0) {
        if (i > nContextLines) {
          _iStart = i - nContextLines;
          aStart = _iStart;
          bStart = _iStart;
          aEnd = aStart;
          bEnd = bStart;
        }
        for (var iCommon = _iStart; iCommon !== i; iCommon += 1) {
          pushCommonLine(diffs[iCommon][1]);
        }
      } else if (i === iLength) {
        var iEnd = i - _iStart > nContextLines ? _iStart + nContextLines : i;
        for (var _iCommon = _iStart; _iCommon !== iEnd; _iCommon += 1) {
          pushCommonLine(diffs[_iCommon][1]);
        }
      } else {
        var nCommon = i - _iStart;
        if (nCommon > nContextLines2) {
          var _iEnd = _iStart + nContextLines;
          for (var _iCommon2 = _iStart; _iCommon2 !== _iEnd; _iCommon2 += 1) {
            pushCommonLine(diffs[_iCommon2][1]);
          }
          lines[jPatchMark] = createPatchMark(aStart, aEnd, bStart, bEnd, options);
          jPatchMark = lines.length;
          lines.push('');
          var nOmit = nCommon - nContextLines2;
          aStart = aEnd + nOmit;
          bStart = bEnd + nOmit;
          aEnd = aStart;
          bEnd = bStart;
          for (var _iCommon3 = i - nContextLines; _iCommon3 !== i; _iCommon3 += 1) {
            pushCommonLine(diffs[_iCommon3][1]);
          }
        } else {
          for (var _iCommon4 = _iStart; _iCommon4 !== i; _iCommon4 += 1) {
            pushCommonLine(diffs[_iCommon4][1]);
          }
        }
      }
    }
    while (i !== iLength && diffs[i][0] === _cleanupSemantic.DIFF_DELETE) {
      pushDeleteLine(diffs[i][1]);
      i += 1;
    }
    while (i !== iLength && diffs[i][0] === _cleanupSemantic.DIFF_INSERT) {
      pushInsertLine(diffs[i][1]);
      i += 1;
    }
  }
  if (hasPatch) {
    lines[jPatchMark] = createPatchMark(aStart, aEnd, bStart, bEnd, options);
  }
  return lines.join('\n');
};
exports.joinAlignedDiffsNoExpand = joinAlignedDiffsNoExpand;
var joinAlignedDiffsExpand = function joinAlignedDiffsExpand(diffs, options) {
  return diffs.map(function (diff, i, diffs) {
    var line = diff[1];
    var isFirstOrLast = i === 0 || i === diffs.length - 1;
    switch (diff[0]) {
      case _cleanupSemantic.DIFF_DELETE:
        return printDeleteLine(line, isFirstOrLast, options);
      case _cleanupSemantic.DIFF_INSERT:
        return printInsertLine(line, isFirstOrLast, options);
      default:
        return printCommonLine(line, isFirstOrLast, options);
    }
  }).join('\n');
};
exports.joinAlignedDiffsExpand = joinAlignedDiffsExpand;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImpvaW5BbGlnbmVkRGlmZnNOb0V4cGFuZCIsImpvaW5BbGlnbmVkRGlmZnNFeHBhbmQiLCJfY2xlYW51cFNlbWFudGljIiwicmVxdWlyZSIsImZvcm1hdFRyYWlsaW5nU3BhY2VzIiwibGluZSIsInRyYWlsaW5nU3BhY2VGb3JtYXR0ZXIiLCJyZXBsYWNlIiwibWF0Y2giLCJwcmludERpZmZMaW5lIiwiaXNGaXJzdE9yTGFzdCIsImNvbG9yIiwiaW5kaWNhdG9yIiwiZW1wdHlGaXJzdE9yTGFzdExpbmVQbGFjZWhvbGRlciIsImxlbmd0aCIsInByaW50RGVsZXRlTGluZSIsIl9yZWYiLCJhQ29sb3IiLCJhSW5kaWNhdG9yIiwiY2hhbmdlTGluZVRyYWlsaW5nU3BhY2VDb2xvciIsInByaW50SW5zZXJ0TGluZSIsIl9yZWYyIiwiYkNvbG9yIiwiYkluZGljYXRvciIsInByaW50Q29tbW9uTGluZSIsIl9yZWYzIiwiY29tbW9uQ29sb3IiLCJjb21tb25JbmRpY2F0b3IiLCJjb21tb25MaW5lVHJhaWxpbmdTcGFjZUNvbG9yIiwiY3JlYXRlUGF0Y2hNYXJrIiwiYVN0YXJ0IiwiYUVuZCIsImJTdGFydCIsImJFbmQiLCJfcmVmNCIsInBhdGNoQ29sb3IiLCJkaWZmcyIsIm9wdGlvbnMiLCJpTGVuZ3RoIiwibkNvbnRleHRMaW5lcyIsImNvbnRleHRMaW5lcyIsIm5Db250ZXh0TGluZXMyIiwiakxlbmd0aCIsImhhc0V4Y2Vzc0F0U3RhcnRPckVuZCIsIm5FeGNlc3Nlc0JldHdlZW5DaGFuZ2VzIiwiaSIsImlTdGFydCIsIkRJRkZfRVFVQUwiLCJuIiwiaGFzUGF0Y2giLCJqTGFzdCIsImxpbmVzIiwialBhdGNoTWFyayIsInB1c2giLCJwdXNoQ29tbW9uTGluZSIsImoiLCJwdXNoRGVsZXRlTGluZSIsInB1c2hJbnNlcnRMaW5lIiwiaUNvbW1vbiIsImlFbmQiLCJuQ29tbW9uIiwibk9taXQiLCJESUZGX0RFTEVURSIsIkRJRkZfSU5TRVJUIiwiam9pbiIsIm1hcCIsImRpZmYiXSwic291cmNlcyI6WyJqb2luQWxpZ25lZERpZmZzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmpvaW5BbGlnbmVkRGlmZnNOb0V4cGFuZCA9IGV4cG9ydHMuam9pbkFsaWduZWREaWZmc0V4cGFuZCA9IHZvaWQgMDtcbnZhciBfY2xlYW51cFNlbWFudGljID0gcmVxdWlyZSgnLi9jbGVhbnVwU2VtYW50aWMnKTtcbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5jb25zdCBmb3JtYXRUcmFpbGluZ1NwYWNlcyA9IChsaW5lLCB0cmFpbGluZ1NwYWNlRm9ybWF0dGVyKSA9PlxuICBsaW5lLnJlcGxhY2UoL1xccyskLywgbWF0Y2ggPT4gdHJhaWxpbmdTcGFjZUZvcm1hdHRlcihtYXRjaCkpO1xuY29uc3QgcHJpbnREaWZmTGluZSA9IChcbiAgbGluZSxcbiAgaXNGaXJzdE9yTGFzdCxcbiAgY29sb3IsXG4gIGluZGljYXRvcixcbiAgdHJhaWxpbmdTcGFjZUZvcm1hdHRlcixcbiAgZW1wdHlGaXJzdE9yTGFzdExpbmVQbGFjZWhvbGRlclxuKSA9PlxuICBsaW5lLmxlbmd0aCAhPT0gMFxuICAgID8gY29sb3IoXG4gICAgICAgIGAke2luZGljYXRvcn0gJHtmb3JtYXRUcmFpbGluZ1NwYWNlcyhsaW5lLCB0cmFpbGluZ1NwYWNlRm9ybWF0dGVyKX1gXG4gICAgICApXG4gICAgOiBpbmRpY2F0b3IgIT09ICcgJ1xuICAgID8gY29sb3IoaW5kaWNhdG9yKVxuICAgIDogaXNGaXJzdE9yTGFzdCAmJiBlbXB0eUZpcnN0T3JMYXN0TGluZVBsYWNlaG9sZGVyLmxlbmd0aCAhPT0gMFxuICAgID8gY29sb3IoYCR7aW5kaWNhdG9yfSAke2VtcHR5Rmlyc3RPckxhc3RMaW5lUGxhY2Vob2xkZXJ9YClcbiAgICA6ICcnO1xuY29uc3QgcHJpbnREZWxldGVMaW5lID0gKFxuICBsaW5lLFxuICBpc0ZpcnN0T3JMYXN0LFxuICB7XG4gICAgYUNvbG9yLFxuICAgIGFJbmRpY2F0b3IsXG4gICAgY2hhbmdlTGluZVRyYWlsaW5nU3BhY2VDb2xvcixcbiAgICBlbXB0eUZpcnN0T3JMYXN0TGluZVBsYWNlaG9sZGVyXG4gIH1cbikgPT5cbiAgcHJpbnREaWZmTGluZShcbiAgICBsaW5lLFxuICAgIGlzRmlyc3RPckxhc3QsXG4gICAgYUNvbG9yLFxuICAgIGFJbmRpY2F0b3IsXG4gICAgY2hhbmdlTGluZVRyYWlsaW5nU3BhY2VDb2xvcixcbiAgICBlbXB0eUZpcnN0T3JMYXN0TGluZVBsYWNlaG9sZGVyXG4gICk7XG5jb25zdCBwcmludEluc2VydExpbmUgPSAoXG4gIGxpbmUsXG4gIGlzRmlyc3RPckxhc3QsXG4gIHtcbiAgICBiQ29sb3IsXG4gICAgYkluZGljYXRvcixcbiAgICBjaGFuZ2VMaW5lVHJhaWxpbmdTcGFjZUNvbG9yLFxuICAgIGVtcHR5Rmlyc3RPckxhc3RMaW5lUGxhY2Vob2xkZXJcbiAgfVxuKSA9PlxuICBwcmludERpZmZMaW5lKFxuICAgIGxpbmUsXG4gICAgaXNGaXJzdE9yTGFzdCxcbiAgICBiQ29sb3IsXG4gICAgYkluZGljYXRvcixcbiAgICBjaGFuZ2VMaW5lVHJhaWxpbmdTcGFjZUNvbG9yLFxuICAgIGVtcHR5Rmlyc3RPckxhc3RMaW5lUGxhY2Vob2xkZXJcbiAgKTtcbmNvbnN0IHByaW50Q29tbW9uTGluZSA9IChcbiAgbGluZSxcbiAgaXNGaXJzdE9yTGFzdCxcbiAge1xuICAgIGNvbW1vbkNvbG9yLFxuICAgIGNvbW1vbkluZGljYXRvcixcbiAgICBjb21tb25MaW5lVHJhaWxpbmdTcGFjZUNvbG9yLFxuICAgIGVtcHR5Rmlyc3RPckxhc3RMaW5lUGxhY2Vob2xkZXJcbiAgfVxuKSA9PlxuICBwcmludERpZmZMaW5lKFxuICAgIGxpbmUsXG4gICAgaXNGaXJzdE9yTGFzdCxcbiAgICBjb21tb25Db2xvcixcbiAgICBjb21tb25JbmRpY2F0b3IsXG4gICAgY29tbW9uTGluZVRyYWlsaW5nU3BhY2VDb2xvcixcbiAgICBlbXB0eUZpcnN0T3JMYXN0TGluZVBsYWNlaG9sZGVyXG4gICk7XG5cbi8vIEluIEdOVSBkaWZmIGZvcm1hdCwgaW5kZXhlcyBhcmUgb25lLWJhc2VkIGluc3RlYWQgb2YgemVyby1iYXNlZC5cbmNvbnN0IGNyZWF0ZVBhdGNoTWFyayA9IChhU3RhcnQsIGFFbmQsIGJTdGFydCwgYkVuZCwge3BhdGNoQ29sb3J9KSA9PlxuICBwYXRjaENvbG9yKFxuICAgIGBAQCAtJHthU3RhcnQgKyAxfSwke2FFbmQgLSBhU3RhcnR9ICske2JTdGFydCArIDF9LCR7YkVuZCAtIGJTdGFydH0gQEBgXG4gICk7XG5cbi8vIGplc3QgLS1uby1leHBhbmRcbi8vXG4vLyBHaXZlbiBhcnJheSBvZiBhbGlnbmVkIHN0cmluZ3Mgd2l0aCBpbnZlcnNlIGhpZ2hsaWdodCBmb3JtYXR0aW5nLFxuLy8gcmV0dXJuIGpvaW5lZCBsaW5lcyB3aXRoIGRpZmYgZm9ybWF0dGluZyAoYW5kIHBhdGNoIG1hcmtzLCBpZiBuZWVkZWQpLlxuY29uc3Qgam9pbkFsaWduZWREaWZmc05vRXhwYW5kID0gKGRpZmZzLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IGlMZW5ndGggPSBkaWZmcy5sZW5ndGg7XG4gIGNvbnN0IG5Db250ZXh0TGluZXMgPSBvcHRpb25zLmNvbnRleHRMaW5lcztcbiAgY29uc3QgbkNvbnRleHRMaW5lczIgPSBuQ29udGV4dExpbmVzICsgbkNvbnRleHRMaW5lcztcblxuICAvLyBGaXJzdCBwYXNzOiBjb3VudCBvdXRwdXQgbGluZXMgYW5kIHNlZSBpZiBpdCBoYXMgcGF0Y2hlcy5cbiAgbGV0IGpMZW5ndGggPSBpTGVuZ3RoO1xuICBsZXQgaGFzRXhjZXNzQXRTdGFydE9yRW5kID0gZmFsc2U7XG4gIGxldCBuRXhjZXNzZXNCZXR3ZWVuQ2hhbmdlcyA9IDA7XG4gIGxldCBpID0gMDtcbiAgd2hpbGUgKGkgIT09IGlMZW5ndGgpIHtcbiAgICBjb25zdCBpU3RhcnQgPSBpO1xuICAgIHdoaWxlIChpICE9PSBpTGVuZ3RoICYmIGRpZmZzW2ldWzBdID09PSBfY2xlYW51cFNlbWFudGljLkRJRkZfRVFVQUwpIHtcbiAgICAgIGkgKz0gMTtcbiAgICB9XG4gICAgaWYgKGlTdGFydCAhPT0gaSkge1xuICAgICAgaWYgKGlTdGFydCA9PT0gMCkge1xuICAgICAgICAvLyBhdCBzdGFydFxuICAgICAgICBpZiAoaSA+IG5Db250ZXh0TGluZXMpIHtcbiAgICAgICAgICBqTGVuZ3RoIC09IGkgLSBuQ29udGV4dExpbmVzOyAvLyBzdWJ0cmFjdCBleGNlc3MgY29tbW9uIGxpbmVzXG4gICAgICAgICAgaGFzRXhjZXNzQXRTdGFydE9yRW5kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpID09PSBpTGVuZ3RoKSB7XG4gICAgICAgIC8vIGF0IGVuZFxuICAgICAgICBjb25zdCBuID0gaSAtIGlTdGFydDtcbiAgICAgICAgaWYgKG4gPiBuQ29udGV4dExpbmVzKSB7XG4gICAgICAgICAgakxlbmd0aCAtPSBuIC0gbkNvbnRleHRMaW5lczsgLy8gc3VidHJhY3QgZXhjZXNzIGNvbW1vbiBsaW5lc1xuICAgICAgICAgIGhhc0V4Y2Vzc0F0U3RhcnRPckVuZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJldHdlZW4gY2hhbmdlc1xuICAgICAgICBjb25zdCBuID0gaSAtIGlTdGFydDtcbiAgICAgICAgaWYgKG4gPiBuQ29udGV4dExpbmVzMikge1xuICAgICAgICAgIGpMZW5ndGggLT0gbiAtIG5Db250ZXh0TGluZXMyOyAvLyBzdWJ0cmFjdCBleGNlc3MgY29tbW9uIGxpbmVzXG4gICAgICAgICAgbkV4Y2Vzc2VzQmV0d2VlbkNoYW5nZXMgKz0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoaSAhPT0gaUxlbmd0aCAmJiBkaWZmc1tpXVswXSAhPT0gX2NsZWFudXBTZW1hbnRpYy5ESUZGX0VRVUFMKSB7XG4gICAgICBpICs9IDE7XG4gICAgfVxuICB9XG4gIGNvbnN0IGhhc1BhdGNoID0gbkV4Y2Vzc2VzQmV0d2VlbkNoYW5nZXMgIT09IDAgfHwgaGFzRXhjZXNzQXRTdGFydE9yRW5kO1xuICBpZiAobkV4Y2Vzc2VzQmV0d2VlbkNoYW5nZXMgIT09IDApIHtcbiAgICBqTGVuZ3RoICs9IG5FeGNlc3Nlc0JldHdlZW5DaGFuZ2VzICsgMTsgLy8gYWRkIHBhdGNoIGxpbmVzXG4gIH0gZWxzZSBpZiAoaGFzRXhjZXNzQXRTdGFydE9yRW5kKSB7XG4gICAgakxlbmd0aCArPSAxOyAvLyBhZGQgcGF0Y2ggbGluZVxuICB9XG5cbiAgY29uc3Qgakxhc3QgPSBqTGVuZ3RoIC0gMTtcbiAgY29uc3QgbGluZXMgPSBbXTtcbiAgbGV0IGpQYXRjaE1hcmsgPSAwOyAvLyBpbmRleCBvZiBwbGFjZWhvbGRlciBsaW5lIGZvciBjdXJyZW50IHBhdGNoIG1hcmtcbiAgaWYgKGhhc1BhdGNoKSB7XG4gICAgbGluZXMucHVzaCgnJyk7IC8vIHBsYWNlaG9sZGVyIGxpbmUgZm9yIGZpcnN0IHBhdGNoIG1hcmtcbiAgfVxuXG4gIC8vIEluZGV4ZXMgb2YgZXhwZWN0ZWQgb3IgcmVjZWl2ZWQgbGluZXMgaW4gY3VycmVudCBwYXRjaDpcbiAgbGV0IGFTdGFydCA9IDA7XG4gIGxldCBiU3RhcnQgPSAwO1xuICBsZXQgYUVuZCA9IDA7XG4gIGxldCBiRW5kID0gMDtcbiAgY29uc3QgcHVzaENvbW1vbkxpbmUgPSBsaW5lID0+IHtcbiAgICBjb25zdCBqID0gbGluZXMubGVuZ3RoO1xuICAgIGxpbmVzLnB1c2gocHJpbnRDb21tb25MaW5lKGxpbmUsIGogPT09IDAgfHwgaiA9PT0gakxhc3QsIG9wdGlvbnMpKTtcbiAgICBhRW5kICs9IDE7XG4gICAgYkVuZCArPSAxO1xuICB9O1xuICBjb25zdCBwdXNoRGVsZXRlTGluZSA9IGxpbmUgPT4ge1xuICAgIGNvbnN0IGogPSBsaW5lcy5sZW5ndGg7XG4gICAgbGluZXMucHVzaChwcmludERlbGV0ZUxpbmUobGluZSwgaiA9PT0gMCB8fCBqID09PSBqTGFzdCwgb3B0aW9ucykpO1xuICAgIGFFbmQgKz0gMTtcbiAgfTtcbiAgY29uc3QgcHVzaEluc2VydExpbmUgPSBsaW5lID0+IHtcbiAgICBjb25zdCBqID0gbGluZXMubGVuZ3RoO1xuICAgIGxpbmVzLnB1c2gocHJpbnRJbnNlcnRMaW5lKGxpbmUsIGogPT09IDAgfHwgaiA9PT0gakxhc3QsIG9wdGlvbnMpKTtcbiAgICBiRW5kICs9IDE7XG4gIH07XG5cbiAgLy8gU2Vjb25kIHBhc3M6IHB1c2ggbGluZXMgd2l0aCBkaWZmIGZvcm1hdHRpbmcgKGFuZCBwYXRjaCBtYXJrcywgaWYgbmVlZGVkKS5cbiAgaSA9IDA7XG4gIHdoaWxlIChpICE9PSBpTGVuZ3RoKSB7XG4gICAgbGV0IGlTdGFydCA9IGk7XG4gICAgd2hpbGUgKGkgIT09IGlMZW5ndGggJiYgZGlmZnNbaV1bMF0gPT09IF9jbGVhbnVwU2VtYW50aWMuRElGRl9FUVVBTCkge1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgICBpZiAoaVN0YXJ0ICE9PSBpKSB7XG4gICAgICBpZiAoaVN0YXJ0ID09PSAwKSB7XG4gICAgICAgIC8vIGF0IGJlZ2lubmluZ1xuICAgICAgICBpZiAoaSA+IG5Db250ZXh0TGluZXMpIHtcbiAgICAgICAgICBpU3RhcnQgPSBpIC0gbkNvbnRleHRMaW5lcztcbiAgICAgICAgICBhU3RhcnQgPSBpU3RhcnQ7XG4gICAgICAgICAgYlN0YXJ0ID0gaVN0YXJ0O1xuICAgICAgICAgIGFFbmQgPSBhU3RhcnQ7XG4gICAgICAgICAgYkVuZCA9IGJTdGFydDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpQ29tbW9uID0gaVN0YXJ0OyBpQ29tbW9uICE9PSBpOyBpQ29tbW9uICs9IDEpIHtcbiAgICAgICAgICBwdXNoQ29tbW9uTGluZShkaWZmc1tpQ29tbW9uXVsxXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaSA9PT0gaUxlbmd0aCkge1xuICAgICAgICAvLyBhdCBlbmRcbiAgICAgICAgY29uc3QgaUVuZCA9IGkgLSBpU3RhcnQgPiBuQ29udGV4dExpbmVzID8gaVN0YXJ0ICsgbkNvbnRleHRMaW5lcyA6IGk7XG4gICAgICAgIGZvciAobGV0IGlDb21tb24gPSBpU3RhcnQ7IGlDb21tb24gIT09IGlFbmQ7IGlDb21tb24gKz0gMSkge1xuICAgICAgICAgIHB1c2hDb21tb25MaW5lKGRpZmZzW2lDb21tb25dWzFdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYmV0d2VlbiBjaGFuZ2VzXG4gICAgICAgIGNvbnN0IG5Db21tb24gPSBpIC0gaVN0YXJ0O1xuICAgICAgICBpZiAobkNvbW1vbiA+IG5Db250ZXh0TGluZXMyKSB7XG4gICAgICAgICAgY29uc3QgaUVuZCA9IGlTdGFydCArIG5Db250ZXh0TGluZXM7XG4gICAgICAgICAgZm9yIChsZXQgaUNvbW1vbiA9IGlTdGFydDsgaUNvbW1vbiAhPT0gaUVuZDsgaUNvbW1vbiArPSAxKSB7XG4gICAgICAgICAgICBwdXNoQ29tbW9uTGluZShkaWZmc1tpQ29tbW9uXVsxXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzW2pQYXRjaE1hcmtdID0gY3JlYXRlUGF0Y2hNYXJrKFxuICAgICAgICAgICAgYVN0YXJ0LFxuICAgICAgICAgICAgYUVuZCxcbiAgICAgICAgICAgIGJTdGFydCxcbiAgICAgICAgICAgIGJFbmQsXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgICBqUGF0Y2hNYXJrID0gbGluZXMubGVuZ3RoO1xuICAgICAgICAgIGxpbmVzLnB1c2goJycpOyAvLyBwbGFjZWhvbGRlciBsaW5lIGZvciBuZXh0IHBhdGNoIG1hcmtcblxuICAgICAgICAgIGNvbnN0IG5PbWl0ID0gbkNvbW1vbiAtIG5Db250ZXh0TGluZXMyO1xuICAgICAgICAgIGFTdGFydCA9IGFFbmQgKyBuT21pdDtcbiAgICAgICAgICBiU3RhcnQgPSBiRW5kICsgbk9taXQ7XG4gICAgICAgICAgYUVuZCA9IGFTdGFydDtcbiAgICAgICAgICBiRW5kID0gYlN0YXJ0O1xuICAgICAgICAgIGZvciAobGV0IGlDb21tb24gPSBpIC0gbkNvbnRleHRMaW5lczsgaUNvbW1vbiAhPT0gaTsgaUNvbW1vbiArPSAxKSB7XG4gICAgICAgICAgICBwdXNoQ29tbW9uTGluZShkaWZmc1tpQ29tbW9uXVsxXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAobGV0IGlDb21tb24gPSBpU3RhcnQ7IGlDb21tb24gIT09IGk7IGlDb21tb24gKz0gMSkge1xuICAgICAgICAgICAgcHVzaENvbW1vbkxpbmUoZGlmZnNbaUNvbW1vbl1bMV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoaSAhPT0gaUxlbmd0aCAmJiBkaWZmc1tpXVswXSA9PT0gX2NsZWFudXBTZW1hbnRpYy5ESUZGX0RFTEVURSkge1xuICAgICAgcHVzaERlbGV0ZUxpbmUoZGlmZnNbaV1bMV0pO1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgICB3aGlsZSAoaSAhPT0gaUxlbmd0aCAmJiBkaWZmc1tpXVswXSA9PT0gX2NsZWFudXBTZW1hbnRpYy5ESUZGX0lOU0VSVCkge1xuICAgICAgcHVzaEluc2VydExpbmUoZGlmZnNbaV1bMV0pO1xuICAgICAgaSArPSAxO1xuICAgIH1cbiAgfVxuICBpZiAoaGFzUGF0Y2gpIHtcbiAgICBsaW5lc1tqUGF0Y2hNYXJrXSA9IGNyZWF0ZVBhdGNoTWFyayhhU3RhcnQsIGFFbmQsIGJTdGFydCwgYkVuZCwgb3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xufTtcblxuLy8gamVzdCAtLWV4cGFuZFxuLy9cbi8vIEdpdmVuIGFycmF5IG9mIGFsaWduZWQgc3RyaW5ncyB3aXRoIGludmVyc2UgaGlnaGxpZ2h0IGZvcm1hdHRpbmcsXG4vLyByZXR1cm4gam9pbmVkIGxpbmVzIHdpdGggZGlmZiBmb3JtYXR0aW5nLlxuZXhwb3J0cy5qb2luQWxpZ25lZERpZmZzTm9FeHBhbmQgPSBqb2luQWxpZ25lZERpZmZzTm9FeHBhbmQ7XG5jb25zdCBqb2luQWxpZ25lZERpZmZzRXhwYW5kID0gKGRpZmZzLCBvcHRpb25zKSA9PlxuICBkaWZmc1xuICAgIC5tYXAoKGRpZmYsIGksIGRpZmZzKSA9PiB7XG4gICAgICBjb25zdCBsaW5lID0gZGlmZlsxXTtcbiAgICAgIGNvbnN0IGlzRmlyc3RPckxhc3QgPSBpID09PSAwIHx8IGkgPT09IGRpZmZzLmxlbmd0aCAtIDE7XG4gICAgICBzd2l0Y2ggKGRpZmZbMF0pIHtcbiAgICAgICAgY2FzZSBfY2xlYW51cFNlbWFudGljLkRJRkZfREVMRVRFOlxuICAgICAgICAgIHJldHVybiBwcmludERlbGV0ZUxpbmUobGluZSwgaXNGaXJzdE9yTGFzdCwgb3B0aW9ucyk7XG4gICAgICAgIGNhc2UgX2NsZWFudXBTZW1hbnRpYy5ESUZGX0lOU0VSVDpcbiAgICAgICAgICByZXR1cm4gcHJpbnRJbnNlcnRMaW5lKGxpbmUsIGlzRmlyc3RPckxhc3QsIG9wdGlvbnMpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBwcmludENvbW1vbkxpbmUobGluZSwgaXNGaXJzdE9yTGFzdCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuam9pbignXFxuJyk7XG5leHBvcnRzLmpvaW5BbGlnbmVkRGlmZnNFeHBhbmQgPSBqb2luQWxpZ25lZERpZmZzRXhwYW5kO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUMzQ0MsS0FBSyxFQUFFO0FBQ1QsQ0FBQyxDQUFDO0FBQ0ZELE9BQU8sQ0FBQ0Usd0JBQXdCLEdBQUdGLE9BQU8sQ0FBQ0csc0JBQXNCLEdBQUcsS0FBSyxDQUFDO0FBQzFFLElBQUlDLGdCQUFnQixHQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFRbkQsSUFBTUMsb0JBQW9CLEdBQUcsU0FBdkJBLG9CQUFvQkEsQ0FBSUMsSUFBSSxFQUFFQyxzQkFBc0I7RUFBQSxPQUN4REQsSUFBSSxDQUFDRSxPQUFPLENBQUMsTUFBTSxFQUFFLFVBQUFDLEtBQUs7SUFBQSxPQUFJRixzQkFBc0IsQ0FBQ0UsS0FBSyxDQUFDO0VBQUEsRUFBQztBQUFBO0FBQzlELElBQU1DLGFBQWEsR0FBRyxTQUFoQkEsYUFBYUEsQ0FDakJKLElBQUksRUFDSkssYUFBYSxFQUNiQyxLQUFLLEVBQ0xDLFNBQVMsRUFDVE4sc0JBQXNCLEVBQ3RCTywrQkFBK0I7RUFBQSxPQUUvQlIsSUFBSSxDQUFDUyxNQUFNLEtBQUssQ0FBQyxHQUNiSCxLQUFLLENBQ0YsR0FBRUMsU0FBVSxJQUFHUixvQkFBb0IsQ0FBQ0MsSUFBSSxFQUFFQyxzQkFBc0IsQ0FBRSxFQUNyRSxDQUFDLEdBQ0RNLFNBQVMsS0FBSyxHQUFHLEdBQ2pCRCxLQUFLLENBQUNDLFNBQVMsQ0FBQyxHQUNoQkYsYUFBYSxJQUFJRywrQkFBK0IsQ0FBQ0MsTUFBTSxLQUFLLENBQUMsR0FDN0RILEtBQUssQ0FBRSxHQUFFQyxTQUFVLElBQUdDLCtCQUFnQyxFQUFDLENBQUMsR0FDeEQsRUFBRTtBQUFBO0FBQ1IsSUFBTUUsZUFBZSxHQUFHLFNBQWxCQSxlQUFlQSxDQUNuQlYsSUFBSSxFQUNKSyxhQUFhLEVBQUFNLElBQUE7RUFB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