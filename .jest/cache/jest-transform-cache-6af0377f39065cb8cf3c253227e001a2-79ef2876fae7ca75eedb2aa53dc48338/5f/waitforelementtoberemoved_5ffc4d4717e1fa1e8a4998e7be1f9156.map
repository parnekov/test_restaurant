{"version":3,"names":["_waitFor","_interopRequireDefault","require","_errors","obj","__esModule","default","isRemoved","result","Array","isArray","length","waitForElementToBeRemoved","_x","_x2","_waitForElementToBeRemoved","apply","arguments","_asyncToGenerator2","expectation","options","timeoutError","ErrorWithStack","initialElements","error"],"sources":["../src/wait-for-element-to-be-removed.ts"],"sourcesContent":["import waitFor from './wait-for';\nimport type { WaitForOptions } from './wait-for';\nimport { ErrorWithStack } from './helpers/errors';\n\nfunction isRemoved<T>(result: T): boolean {\n  return !result || (Array.isArray(result) && !result.length);\n}\n\nexport default async function waitForElementToBeRemoved<T>(\n  expectation: () => T,\n  options?: WaitForOptions,\n): Promise<T> {\n  // Created here so we get a nice stacktrace\n  const timeoutError = new ErrorWithStack(\n    'Timed out in waitForElementToBeRemoved.',\n    waitForElementToBeRemoved,\n  );\n\n  // Elements have to be present initally and then removed.\n  const initialElements = expectation();\n  if (isRemoved(initialElements)) {\n    throw new ErrorWithStack(\n      'The element(s) given to waitForElementToBeRemoved are already removed. waitForElementToBeRemoved requires that the element(s) exist(s) before waiting for removal.',\n      waitForElementToBeRemoved,\n    );\n  }\n\n  return await waitFor(() => {\n    let result;\n    try {\n      result = expectation();\n    } catch (error) {\n      return initialElements;\n    }\n\n    if (!isRemoved(result)) {\n      throw timeoutError;\n    }\n\n    return initialElements;\n  }, options);\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAD,OAAA;AAAkD,SAAAD,uBAAAG,GAAA;EAAA,OAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA;IAAAE,OAAA,EAAAF;EAAA;AAAA;AAElD,SAASG,SAASA,CAAIC,MAAS,EAAW;EACxC,OAAO,CAACA,MAAM,IAAKC,KAAK,CAACC,OAAO,CAACF,MAAM,CAAC,IAAI,CAACA,MAAM,CAACG,MAAO;AAC7D;AAAA,SAE8BC,yBAAyBA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,0BAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,2BAAA;EAAAA,0BAAA,OAAAG,kBAAA,CAAAZ,OAAA,EAAxC,WACba,WAAoB,EACpBC,OAAwB,EACZ;IAEZ,IAAMC,YAAY,GAAG,IAAIlB,OAAA,CAAAmB,cAAc,CACrC,yCAAyC,EACzCV,yBACF,CAAC;IAGD,IAAMW,eAAe,GAAGJ,WAAW,CAAC,CAAC;IACrC,IAAIZ,SAAS,CAACgB,eAAe,CAAC,EAAE;MAC9B,MAAM,IAAIpB,OAAA,CAAAmB,cAAc,CACtB,oKAAoK,EACpKV,yBACF,CAAC;IACH;IAEA,aAAa,IAAAZ,QAAA,CAAAM,OAAO,EAAC,YAAM;MACzB,IAAIE,MAAM;MACV,IAAI;QACFA,MAAM,GAAGW,WAAW,CAAC,CAAC;MACxB,CAAC,CAAC,OAAOK,KAAK,EAAE;QACd,OAAOD,eAAe;MACxB;MAEA,IAAI,CAAChB,SAAS,CAACC,MAAM,CAAC,EAAE;QACtB,MAAMa,YAAY;MACpB;MAEA,OAAOE,eAAe;IACxB,CAAC,EAAEH,OAAO,CAAC;EACb;EAAA,OAAAL,0BAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA","ignoreList":[]}