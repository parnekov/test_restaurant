5ff942faf613d0d82fad9c88de99205c
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classPrivateFieldLooseBase2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseBase"));
var _classPrivateFieldLooseKey2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseKey"));
var _registry = (0, _classPrivateFieldLooseKey2.default)("registry");
var EventEmitter = exports.default = function () {
  function EventEmitter() {
    (0, _classCallCheck2.default)(this, EventEmitter);
    Object.defineProperty(this, _registry, {
      writable: true,
      value: {}
    });
  }
  return (0, _createClass2.default)(EventEmitter, [{
    key: "addListener",
    value: function addListener(eventType, listener, context) {
      if (typeof listener !== 'function') {
        throw new TypeError('EventEmitter.addListener(...): 2nd argument must be a function.');
      }
      var registrations = allocate((0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry], eventType);
      var registration = {
        context: context,
        listener: listener,
        remove: function remove() {
          registrations.delete(registration);
        }
      };
      registrations.add(registration);
      return registration;
    }
  }, {
    key: "emit",
    value: function emit(eventType) {
      var registrations = (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry][eventType];
      if (registrations != null) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        for (var registration of Array.from(registrations)) {
          registration.listener.apply(registration.context, args);
        }
      }
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners(eventType) {
      if (eventType == null) {
        (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry] = {};
      } else {
        delete (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry][eventType];
      }
    }
  }, {
    key: "listenerCount",
    value: function listenerCount(eventType) {
      var registrations = (0, _classPrivateFieldLooseBase2.default)(this, _registry)[_registry][eventType];
      return registrations == null ? 0 : registrations.size;
    }
  }]);
}();
function allocate(registry, eventType) {
  var registrations = registry[eventType];
  if (registrations == null) {
    registrations = new Set();
    registry[eventType] = registrations;
  }
  return registrations;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJleHBvcnRzIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjazIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIl9yZWdpc3RyeSIsIndyaXRhYmxlIiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwiYWRkTGlzdGVuZXIiLCJldmVudFR5cGUiLCJsaXN0ZW5lciIsImNvbnRleHQiLCJUeXBlRXJyb3IiLCJyZWdpc3RyYXRpb25zIiwiYWxsb2NhdGUiLCJfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UyIiwicmVnaXN0cmF0aW9uIiwicmVtb3ZlIiwiZGVsZXRlIiwiYWRkIiwiZW1pdCIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiZnJvbSIsImFwcGx5IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwibGlzdGVuZXJDb3VudCIsInNpemUiLCJyZWdpc3RyeSIsIlNldCJdLCJzb3VyY2VzIjpbIkV2ZW50RW1pdHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0XG4gKiBAZm9ybWF0XG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudFN1YnNjcmlwdGlvbiB7XG4gIHJlbW92ZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFdmVudEVtaXR0ZXI8VEV2ZW50VG9BcmdzTWFwOiB7Li4ufT4ge1xuICBhZGRMaXN0ZW5lcjxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZTogVEV2ZW50LFxuICAgIGxpc3RlbmVyOiAoLi4uYXJnczogVEV2ZW50VG9BcmdzTWFwW1RFdmVudF0pID0+IG1peGVkLFxuICAgIGNvbnRleHQ/OiBtaXhlZCxcbiAgKTogRXZlbnRTdWJzY3JpcHRpb247XG5cbiAgZW1pdDxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZTogVEV2ZW50LFxuICAgIC4uLmFyZ3M6IFRFdmVudFRvQXJnc01hcFtURXZlbnRdXG4gICk6IHZvaWQ7XG5cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzPFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPj4oZXZlbnRUeXBlPzogP1RFdmVudCk6IHZvaWQ7XG5cbiAgbGlzdGVuZXJDb3VudDxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KGV2ZW50VHlwZTogVEV2ZW50KTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgUmVnaXN0cmF0aW9uPFRBcmdzPiB7XG4gICtjb250ZXh0OiBtaXhlZDtcbiAgK2xpc3RlbmVyOiAoLi4uYXJnczogVEFyZ3MpID0+IG1peGVkO1xuICArcmVtb3ZlOiAoKSA9PiB2b2lkO1xufVxuXG4vLyAkRmxvd0ZpeE1lW2RlcHJlY2F0ZWQtdHlwZV1cbnR5cGUgUmVnaXN0cnk8VEV2ZW50VG9BcmdzTWFwOiB7Li4ufT4gPSAkT2JqTWFwPFxuICBURXZlbnRUb0FyZ3NNYXAsXG4gIDxUQXJncz4oVEFyZ3MpID0+IFNldDxSZWdpc3RyYXRpb248VEFyZ3M+Pixcbj47XG5cbi8qKlxuICogRXZlbnRFbWl0dGVyIG1hbmFnZXMgbGlzdGVuZXJzIGFuZCBwdWJsaXNoZXMgZXZlbnRzIHRvIHRoZW0uXG4gKlxuICogRXZlbnRFbWl0dGVyIGFjY2VwdHMgYSBzaW5nbGUgdHlwZSBwYXJhbWV0ZXIgdGhhdCBkZWZpbmVzIHRoZSB2YWxpZCBldmVudHNcbiAqIGFuZCBhc3NvY2lhdGVkIGxpc3RlbmVyIGFyZ3VtZW50KHMpLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogICBjb25zdCBlbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjx7XG4gKiAgICAgc3VjY2VzczogW251bWJlciwgc3RyaW5nXSxcbiAqICAgICBlcnJvcjogW0Vycm9yXSxcbiAqICAgfT4oKTtcbiAqXG4gKiAgIGVtaXR0ZXIub24oJ3N1Y2Nlc3MnLCAoc3RhdHVzQ29kZSwgcmVzcG9uc2VUZXh0KSA9PiB7Li4ufSk7XG4gKiAgIGVtaXR0ZXIuZW1pdCgnc3VjY2VzcycsIDIwMCwgJy4uLicpO1xuICpcbiAqICAgZW1pdHRlci5vbignZXJyb3InLCBlcnJvciA9PiB7Li4ufSk7XG4gKiAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ1Jlc291cmNlIG5vdCBmb3VuZCcpKTtcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50RW1pdHRlcjxURXZlbnRUb0FyZ3NNYXA6IHsuLi59PlxuICBpbXBsZW1lbnRzIElFdmVudEVtaXR0ZXI8VEV2ZW50VG9BcmdzTWFwPlxue1xuICAjcmVnaXN0cnk6IFJlZ2lzdHJ5PFRFdmVudFRvQXJnc01hcD4gPSB7fTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgc3VwcGxpZWQgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICogUmV0dXJucyBhIHN1YnNjcmlwdGlvbiB0aGF0IGhhcyBhIGByZW1vdmVgIG1ldGhvZCB0byB1bmRvIHJlZ2lzdHJhdGlvbi5cbiAgICovXG4gIGFkZExpc3RlbmVyPFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPj4oXG4gICAgZXZlbnRUeXBlOiBURXZlbnQsXG4gICAgbGlzdGVuZXI6ICguLi5hcmdzOiBURXZlbnRUb0FyZ3NNYXBbVEV2ZW50XSkgPT4gbWl4ZWQsXG4gICAgY29udGV4dDogbWl4ZWQsXG4gICk6IEV2ZW50U3Vic2NyaXB0aW9uIHtcbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnRXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKC4uLik6IDJuZCBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24uJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnMgPSBhbGxvY2F0ZTxcbiAgICAgIFRFdmVudFRvQXJnc01hcCxcbiAgICAgIFRFdmVudCxcbiAgICAgIFRFdmVudFRvQXJnc01hcFtURXZlbnRdLFxuICAgID4odGhpcy4jcmVnaXN0cnksIGV2ZW50VHlwZSk7XG4gICAgY29uc3QgcmVnaXN0cmF0aW9uOiBSZWdpc3RyYXRpb248VEV2ZW50VG9BcmdzTWFwW1RFdmVudF0+ID0ge1xuICAgICAgY29udGV4dCxcbiAgICAgIGxpc3RlbmVyLFxuICAgICAgcmVtb3ZlKCk6IHZvaWQge1xuICAgICAgICByZWdpc3RyYXRpb25zLmRlbGV0ZShyZWdpc3RyYXRpb24pO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHJlZ2lzdHJhdGlvbnMuYWRkKHJlZ2lzdHJhdGlvbik7XG4gICAgcmV0dXJuIHJlZ2lzdHJhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbWl0cyB0aGUgc3VwcGxpZWQgZXZlbnQuIEFkZGl0aW9uYWwgYXJndW1lbnRzIHN1cHBsaWVkIHRvIGBlbWl0YCB3aWxsIGJlXG4gICAqIHBhc3NlZCB0aHJvdWdoIHRvIGVhY2ggb2YgdGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBJZiBhIGxpc3RlbmVyIG1vZGlmaWVzIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgdGhlIHNhbWUgZXZlbnQsIHRob3NlXG4gICAqIGNoYW5nZXMgd2lsbCBub3QgYmUgcmVmbGVjdGVkIGluIHRoZSBjdXJyZW50IGludm9jYXRpb24gb2YgYGVtaXRgLlxuICAgKi9cbiAgZW1pdDxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZTogVEV2ZW50LFxuICAgIC4uLmFyZ3M6IFRFdmVudFRvQXJnc01hcFtURXZlbnRdXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnM6ID9TZXQ8UmVnaXN0cmF0aW9uPFRFdmVudFRvQXJnc01hcFtURXZlbnRdPj4gPVxuICAgICAgdGhpcy4jcmVnaXN0cnlbZXZlbnRUeXBlXTtcbiAgICBpZiAocmVnaXN0cmF0aW9ucyAhPSBudWxsKSB7XG4gICAgICAvLyBDb3B5IGByZWdpc3RyYXRpb25zYCB0byB0YWtlIGEgc25hcHNob3Qgd2hlbiB3ZSBpbnZva2UgYGVtaXRgLCBpbiBjYXNlXG4gICAgICAvLyByZWdpc3RyYXRpb25zIGFyZSBhZGRlZCBvciByZW1vdmVkIHdoZW4gbGlzdGVuZXJzIGFyZSBpbnZva2VkLlxuICAgICAgZm9yIChjb25zdCByZWdpc3RyYXRpb24gb2YgQXJyYXkuZnJvbShyZWdpc3RyYXRpb25zKSkge1xuICAgICAgICByZWdpc3RyYXRpb24ubGlzdGVuZXIuYXBwbHkocmVnaXN0cmF0aW9uLmNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAgICovXG4gIHJlbW92ZUFsbExpc3RlbmVyczxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZT86ID9URXZlbnQsXG4gICk6IHZvaWQge1xuICAgIGlmIChldmVudFR5cGUgPT0gbnVsbCkge1xuICAgICAgdGhpcy4jcmVnaXN0cnkgPSB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHRoaXMuI3JlZ2lzdHJ5W2V2ZW50VHlwZV07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByZWdpc3RlcmVkIGxpc3RlbmVycyBmb3IgdGhlIHN1cHBsaWVkIGV2ZW50LlxuICAgKi9cbiAgbGlzdGVuZXJDb3VudDxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KGV2ZW50VHlwZTogVEV2ZW50KTogbnVtYmVyIHtcbiAgICBjb25zdCByZWdpc3RyYXRpb25zOiA/U2V0PFJlZ2lzdHJhdGlvbjxtaXhlZD4+ID0gdGhpcy4jcmVnaXN0cnlbZXZlbnRUeXBlXTtcbiAgICByZXR1cm4gcmVnaXN0cmF0aW9ucyA9PSBudWxsID8gMCA6IHJlZ2lzdHJhdGlvbnMuc2l6ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhbGxvY2F0ZTxcbiAgVEV2ZW50VG9BcmdzTWFwOiB7Li4ufSxcbiAgVEV2ZW50OiAkS2V5czxURXZlbnRUb0FyZ3NNYXA+LFxuICBURXZlbnRBcmdzOiBURXZlbnRUb0FyZ3NNYXBbVEV2ZW50XSxcbj4oXG4gIHJlZ2lzdHJ5OiBSZWdpc3RyeTxURXZlbnRUb0FyZ3NNYXA+LFxuICBldmVudFR5cGU6IFRFdmVudCxcbik6IFNldDxSZWdpc3RyYXRpb248VEV2ZW50QXJncz4+IHtcbiAgbGV0IHJlZ2lzdHJhdGlvbnM6ID9TZXQ8UmVnaXN0cmF0aW9uPFRFdmVudEFyZ3M+PiA9IHJlZ2lzdHJ5W2V2ZW50VHlwZV07XG4gIGlmIChyZWdpc3RyYXRpb25zID09IG51bGwpIHtcbiAgICByZWdpc3RyYXRpb25zID0gbmV3IFNldCgpO1xuICAgIHJlZ2lzdHJ5W2V2ZW50VHlwZV0gPSByZWdpc3RyYXRpb25zO1xuICB9XG4gIHJldHVybiByZWdpc3RyYXRpb25zO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBK0RxQkEsWUFBWSxHQUFBQyxPQUFBLENBQUFDLE9BQUE7RUFBQSxTQUFBRixhQUFBO0lBQUEsSUFBQUcsZ0JBQUEsQ0FBQUQsT0FBQSxRQUFBRixZQUFBO0lBQUFJLE1BQUEsQ0FBQUMsY0FBQSxPQUFBQyxTQUFBO01BQUFDLFFBQUE7TUFBQUMsS0FBQSxFQUdRLENBQUM7SUFBQztFQUFBO0VBQUEsV0FBQUMsYUFBQSxDQUFBUCxPQUFBLEVBQUFGLFlBQUE7SUFBQVUsR0FBQTtJQUFBRixLQUFBLEVBTXpDLFNBQUFHLFlBQ0VDLFNBQWlCLEVBQ2pCQyxRQUFxRCxFQUNyREMsT0FBYyxFQUNLO01BQ25CLElBQUksT0FBT0QsUUFBUSxLQUFLLFVBQVUsRUFBRTtRQUNsQyxNQUFNLElBQUlFLFNBQVMsQ0FDakIsaUVBQ0YsQ0FBQztNQUNIO01BQ0EsSUFBTUMsYUFBYSxHQUFHQyxRQUFRLEtBQUFDLDRCQUFBLENBQUFoQixPQUFBLEVBSTVCLElBQUksRUFBQUksU0FBQSxFQUFBQSxTQUFBLEdBQVlNLFNBQVMsQ0FBQztNQUM1QixJQUFNTyxZQUFtRCxHQUFHO1FBQzFETCxPQUFPLEVBQVBBLE9BQU87UUFDUEQsUUFBUSxFQUFSQSxRQUFRO1FBQ1JPLE1BQU0sV0FBQUEsT0FBQSxFQUFTO1VBQ2JKLGFBQWEsQ0FBQ0ssTUFBTSxDQUFDRixZQUFZLENBQUM7UUFDcEM7TUFDRixDQUFDO01BQ0RILGFBQWEsQ0FBQ00sR0FBRyxDQUFDSCxZQUFZLENBQUM7TUFDL0IsT0FBT0EsWUFBWTtJQUNyQjtFQUFDO0lBQUFULEdBQUE7SUFBQUYsS0FBQSxFQVNELFNBQUFlLEtBQ0VYLFNBQWlCLEVBRVg7TUFDTixJQUFNSSxhQUEwRCxHQUM5RCxJQUFBRSw0QkFBQSxDQUFBaEIsT0FBQSxNQUFJLEVBQUFJLFNBQUEsRUFBQUEsU0FBQSxFQUFXTSxTQUFTLENBQUM7TUFDM0IsSUFBSUksYUFBYSxJQUFJLElBQUksRUFBRTtRQUFBLFNBQUFRLElBQUEsR0FBQUMsU0FBQSxDQUFBQyxNQUFBLEVBSnhCQyxJQUFJLE9BQUFDLEtBQUEsQ0FBQUosSUFBQSxPQUFBQSxJQUFBLFdBQUFLLElBQUEsTUFBQUEsSUFBQSxHQUFBTCxJQUFBLEVBQUFLLElBQUE7VUFBSkYsSUFBSSxDQUFBRSxJQUFBLFFBQUFKLFNBQUEsQ0FBQUksSUFBQTtRQUFBO1FBT0wsS0FBSyxJQUFNVixZQUFZLElBQUlTLEtBQUssQ0FBQ0UsSUFBSSxDQUFDZCxhQUFhLENBQUMsRUFBRTtVQUNwREcsWUFBWSxDQUFDTixRQUFRLENBQUNrQixLQUFLLENBQUNaLFlBQVksQ0FBQ0wsT0FBTyxFQUFFYSxJQUFJLENBQUM7UUFDekQ7TUFDRjtJQUNGO0VBQUM7SUFBQWpCLEdBQUE7SUFBQUYsS0FBQSxFQUtELFNBQUF3QixtQkFDRXBCLFNBQW1CLEVBQ2I7TUFDTixJQUFJQSxTQUFTLElBQUksSUFBSSxFQUFFO1FBQ3JCLElBQUFNLDRCQUFBLENBQUFoQixPQUFBLE1BQUksRUFBQUksU0FBQSxFQUFBQSxTQUFBLElBQWEsQ0FBQyxDQUFDO01BQ3JCLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBQVksNEJBQUEsQ0FBQWhCLE9BQUEsTUFBSSxFQUFBSSxTQUFBLEVBQUFBLFNBQUEsRUFBV00sU0FBUyxDQUFDO01BQ2xDO0lBQ0Y7RUFBQztJQUFBRixHQUFBO0lBQUFGLEtBQUEsRUFLRCxTQUFBeUIsY0FBOENyQixTQUFpQixFQUFVO01BQ3ZFLElBQU1JLGFBQXdDLEdBQUcsSUFBQUUsNEJBQUEsQ0FBQWhCLE9BQUEsTUFBSSxFQUFBSSxTQUFBLEVBQUFBLFNBQUEsRUFBV00sU0FBUyxDQUFDO01BQzFFLE9BQU9JLGFBQWEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHQSxhQUFhLENBQUNrQixJQUFJO0lBQ3ZEO0VBQUM7QUFBQTtBQUdILFNBQVNqQixRQUFRQSxDQUtma0IsUUFBbUMsRUFDbkN2QixTQUFpQixFQUNjO0VBQy9CLElBQUlJLGFBQTZDLEdBQUdtQixRQUFRLENBQUN2QixTQUFTLENBQUM7RUFDdkUsSUFBSUksYUFBYSxJQUFJLElBQUksRUFBRTtJQUN6QkEsYUFBYSxHQUFHLElBQUlvQixHQUFHLENBQUMsQ0FBQztJQUN6QkQsUUFBUSxDQUFDdkIsU0FBUyxDQUFDLEdBQUdJLGFBQWE7RUFDckM7RUFDQSxPQUFPQSxhQUFhO0FBQ3RCIiwiaWdub3JlTGlzdCI6W119