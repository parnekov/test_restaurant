{"version":3,"names":["_ReactNativeStyleAttributes","_interopRequireDefault","require","_View","_DebuggingOverlay","_useSubscribeToDebuggingOverlayRegistry","_RCTDeviceEventEmitter","_LogBoxNotificationContainer","_StyleSheet","_RootTag","React","_interopRequireWildcard","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","useEffect","useState","useCallback","reactDevToolsHook","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","resolveRNStyle","nativeStyleEditorValidAttributes","keys","ReactNativeStyleAttributes","InspectorDeferred","_ref","inspectedViewRef","onInspectedViewRerenderRequest","reactDevToolsAgent","Inspector","jsx","onRequestRerenderApp","ReactDevToolsOverlayDeferred","_ref2","ReactDevToolsOverlay","AppContainer","_ref3","children","fabric","initialProps","_ref3$internal_exclud","internal_excludeInspector","_ref3$internal_exclud2","internal_excludeLogBox","rootTag","showArchitectureIndicator","WrapperComponent","appContainerRootViewRef","useRef","innerViewRef","debuggingOverlayRef","useSubscribeToDebuggingOverlayRegistry","_useState","_useState2","_slicedToArray2","key","setKey","_useState3","_useState4","shouldRenderInspector","setShouldRenderInspector","_useState5","reactDevtoolsAgent","_useState6","setReactDevToolsAgent","inspectorSubscription","RCTDeviceEventEmitter","addListener","value","reactDevToolsAgentListener","on","_inspectorSubscriptio","remove","off","innerView","collapsable","pointerEvents","style","styles","container","ref","k","RootTagContext","Provider","createRootTag","jsxs","StyleSheet","create","flex","_default","exports"],"sources":["AppContainer-dev.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n * @oncall react_native\n */\n\nimport type {\n  ReactDevToolsAgent,\n  ReactDevToolsGlobalHook,\n} from '../Types/ReactDevToolsTypes';\nimport type {Props} from './AppContainer';\n\nimport ReactNativeStyleAttributes from '../Components/View/ReactNativeStyleAttributes';\nimport View from '../Components/View/View';\nimport DebuggingOverlay from '../Debugging/DebuggingOverlay';\nimport useSubscribeToDebuggingOverlayRegistry from '../Debugging/useSubscribeToDebuggingOverlayRegistry';\nimport RCTDeviceEventEmitter from '../EventEmitter/RCTDeviceEventEmitter';\nimport LogBoxNotificationContainer from '../LogBox/LogBoxNotificationContainer';\nimport StyleSheet from '../StyleSheet/StyleSheet';\nimport {RootTagContext, createRootTag} from './RootTag';\nimport * as React from 'react';\n\nconst {useEffect, useState, useCallback} = React;\n\nconst reactDevToolsHook: ReactDevToolsGlobalHook =\n  window.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n\n// Required for React DevTools to view / edit React Native styles in Flipper.\n// Flipper doesn't inject these values when initializing DevTools.\nif (reactDevToolsHook) {\n  reactDevToolsHook.resolveRNStyle = require('../StyleSheet/flattenStyle');\n  reactDevToolsHook.nativeStyleEditorValidAttributes = Object.keys(\n    ReactNativeStyleAttributes,\n  );\n}\n\ntype InspectorDeferredProps = {\n  inspectedViewRef: InspectedViewRef,\n  onInspectedViewRerenderRequest: () => void,\n  reactDevToolsAgent?: ReactDevToolsAgent,\n};\n\nconst InspectorDeferred = ({\n  inspectedViewRef,\n  onInspectedViewRerenderRequest,\n  reactDevToolsAgent,\n}: InspectorDeferredProps) => {\n  // D39382967 adds a require cycle: InitializeCore -> AppContainer -> Inspector -> InspectorPanel -> ScrollView -> InitializeCore\n  // We can't remove it yet, fallback to dynamic require for now. This is the only reason why this logic is in a separate function.\n  const Inspector = require('../Inspector/Inspector');\n\n  return (\n    <Inspector\n      inspectedViewRef={inspectedViewRef}\n      onRequestRerenderApp={onInspectedViewRerenderRequest}\n      reactDevToolsAgent={reactDevToolsAgent}\n    />\n  );\n};\n\ntype ReactDevToolsOverlayDeferredProps = {\n  inspectedViewRef: InspectedViewRef,\n  reactDevToolsAgent: ReactDevToolsAgent,\n};\n\nconst ReactDevToolsOverlayDeferred = ({\n  inspectedViewRef,\n  reactDevToolsAgent,\n}: ReactDevToolsOverlayDeferredProps) => {\n  const ReactDevToolsOverlay =\n    require('../Inspector/ReactDevToolsOverlay').default;\n\n  return (\n    <ReactDevToolsOverlay\n      inspectedViewRef={inspectedViewRef}\n      reactDevToolsAgent={reactDevToolsAgent}\n    />\n  );\n};\n\nconst AppContainer = ({\n  children,\n  fabric,\n  initialProps,\n  internal_excludeInspector = false,\n  internal_excludeLogBox = false,\n  rootTag,\n  showArchitectureIndicator,\n  WrapperComponent,\n}: Props): React.Node => {\n  const appContainerRootViewRef: AppContainerRootViewRef = React.useRef(null);\n  const innerViewRef: InspectedViewRef = React.useRef(null);\n  const debuggingOverlayRef: DebuggingOverlayRef = React.useRef(null);\n\n  useSubscribeToDebuggingOverlayRegistry(\n    appContainerRootViewRef,\n    debuggingOverlayRef,\n  );\n\n  const [key, setKey] = useState(0);\n  const [shouldRenderInspector, setShouldRenderInspector] = useState(false);\n  const [reactDevToolsAgent, setReactDevToolsAgent] =\n    useState<ReactDevToolsAgent | void>(reactDevToolsHook?.reactDevtoolsAgent);\n\n  useEffect(() => {\n    let inspectorSubscription = null;\n    if (!internal_excludeInspector) {\n      inspectorSubscription = RCTDeviceEventEmitter.addListener(\n        'toggleElementInspector',\n        () => setShouldRenderInspector(value => !value),\n      );\n    }\n\n    let reactDevToolsAgentListener = null;\n    // If this is first render, subscribe to the event from React DevTools hook\n    if (reactDevToolsHook != null && reactDevToolsAgent == null) {\n      reactDevToolsAgentListener = setReactDevToolsAgent;\n      reactDevToolsHook.on?.('react-devtools', reactDevToolsAgentListener);\n    }\n\n    return () => {\n      inspectorSubscription?.remove();\n\n      if (\n        reactDevToolsHook?.off != null &&\n        reactDevToolsAgentListener != null\n      ) {\n        reactDevToolsHook.off('react-devtools', reactDevToolsAgentListener);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  let innerView: React.Node = (\n    <View\n      collapsable={reactDevToolsAgent == null && !shouldRenderInspector}\n      pointerEvents=\"box-none\"\n      key={key}\n      style={styles.container}\n      ref={innerViewRef}>\n      {children}\n    </View>\n  );\n\n  if (WrapperComponent != null) {\n    innerView = (\n      <WrapperComponent\n        initialProps={initialProps}\n        fabric={fabric === true}\n        showArchitectureIndicator={showArchitectureIndicator === true}>\n        {innerView}\n      </WrapperComponent>\n    );\n  }\n\n  const onInspectedViewRerenderRequest = useCallback(\n    () => setKey(k => k + 1),\n    [],\n  );\n\n  return (\n    <RootTagContext.Provider value={createRootTag(rootTag)}>\n      <View\n        ref={appContainerRootViewRef}\n        style={styles.container}\n        pointerEvents=\"box-none\">\n        {innerView}\n\n        <DebuggingOverlay ref={debuggingOverlayRef} />\n\n        {reactDevToolsAgent != null && (\n          <ReactDevToolsOverlayDeferred\n            inspectedViewRef={innerViewRef}\n            reactDevToolsAgent={reactDevToolsAgent}\n          />\n        )}\n\n        {shouldRenderInspector && (\n          <InspectorDeferred\n            inspectedViewRef={innerViewRef}\n            onInspectedViewRerenderRequest={onInspectedViewRerenderRequest}\n            reactDevToolsAgent={reactDevToolsAgent}\n          />\n        )}\n\n        {!internal_excludeLogBox && <LogBoxNotificationContainer />}\n      </View>\n    </RootTagContext.Provider>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {flex: 1},\n});\n\nexport type AppContainerRootViewRef = React.RefObject<React.ElementRef<\n  typeof View,\n> | null>;\nexport type InspectedViewRef = React.RefObject<React.ElementRef<\n  typeof View,\n> | null>;\nexport type DebuggingOverlayRef = React.RefObject<React.ElementRef<\n  typeof DebuggingOverlay,\n> | null>;\n\nexport default AppContainer;\n"],"mappings":"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","ignoreList":[]}